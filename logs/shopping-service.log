time=2025-09-06T15:31:49.719+02:00 level=INFO msg="Telegram admin users configured" env=local count=1
time=2025-09-06T15:31:49.719+02:00 level=INFO msg="Telegram bot initialized" env=local bot_enabled=true
time=2025-09-06T15:31:49.720+02:00 level=INFO msg="Starting HTTP server" env=local address=0.0.0.0:3001
time=2025-09-06T15:31:49.720+02:00 level=INFO msg="Telegram service started" env=local
time=2025-09-06T15:31:49.720+02:00 level=INFO msg="Starting Telegram bot" env=local bot_username=shopping_service_bot
time=2025-09-06T15:34:45.230+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/start
time=2025-09-06T15:36:57.322+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/start
time=2025-09-06T15:37:01.442+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/help\
time=2025-09-06T15:37:01.482+02:00 level=ERROR msg="Failed to send message" env=local error="Bad Request: can't parse entities: Unsupported start tag \"telegram_id\" at byte offset 223" chat_id=508225490
time=2025-09-06T15:37:04.659+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/help
time=2025-09-06T15:37:04.698+02:00 level=ERROR msg="Failed to send message" env=local error="Bad Request: can't parse entities: Unsupported start tag \"telegram_id\" at byte offset 223" chat_id=508225490
time=2025-09-06T15:37:38.933+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/status
time=2025-09-06T15:43:17.725+02:00 level=INFO msg="Received message" env=local user_id=456230761 username="" chat_id=456230761 text=/start
time=2025-09-06T15:48:17.744+02:00 level=INFO msg="Received message" env=local user_id=456230761 username="" chat_id=456230761 text=/start
time=2025-09-06T15:48:32.187+02:00 level=INFO msg="Received message" env=local user_id=456230761 username="" chat_id=456230761 text=/help
time=2025-09-06T15:49:04.194+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/start
time=2025-09-06T15:49:06.357+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/help
time=2025-09-06T15:49:06.396+02:00 level=ERROR msg="Failed to send message" env=local error="Bad Request: can't parse entities: Unsupported start tag \"telegram_id\" at byte offset 223" chat_id=508225490
time=2025-09-06T15:49:13.987+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/help
time=2025-09-06T15:49:14.028+02:00 level=ERROR msg="Failed to send message" env=local error="Bad Request: can't parse entities: Unsupported start tag \"telegram_id\" at byte offset 223" chat_id=508225490
time=2025-09-06T15:49:18.688+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/start
time=2025-09-06T15:49:20.675+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/help
time=2025-09-06T15:49:20.717+02:00 level=ERROR msg="Failed to send message" env=local error="Bad Request: can't parse entities: Unsupported start tag \"telegram_id\" at byte offset 223" chat_id=508225490
time=2025-09-06T15:50:27.711+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/start
time=2025-09-06T15:57:18.737+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=sfsd
time=2025-09-06T16:02:13.883+02:00 level=INFO msg="Received message" env=local user_id=508225490 username=washerd chat_id=508225490 text=/help
time=2025-09-06T16:02:13.922+02:00 level=ERROR msg="Failed to send message" env=local error="Bad Request: can't parse entities: Unsupported start tag \"telegram_id\" at byte offset 223" chat_id=508225490
time=2025-09-06T16:03:13.920+02:00 level=INFO msg="Shutting down server" env=local
time=2025-09-06T16:03:13.921+02:00 level=INFO msg="Stopping Telegram service..." env=local
time=2025-09-06T16:03:13.921+02:00 level=INFO msg="Bot context cancelled, stopping" env=local
{"time":"2025-09-06T16:20:02.471153348+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T16:20:02.471330523+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T16:20:02.637907954+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T16:20:02.637991088+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T16:20:02.638015131+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T16:20:02.638754132+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T16:20:02.638913999+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T16:20:02.638810785+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T16:20:02.638892363+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true,"admin_count":1}
{"time":"2025-09-06T16:20:23.179655764+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/start","chat_id":456230761,"message_type":"command","command":"start"}
{"time":"2025-09-06T16:20:23.195821402+02:00","level":"ERROR","msg":"Failed to render admin new user template","env":"local","error":"template: admin_new_user.html:9:24: executing \"admin_new_user.html\" at <.CreatedAt.Format>: can't evaluate field Format in type string"}
{"time":"2025-09-06T16:21:51.609154558+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T16:21:51.609195631+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T16:21:51.609204838+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T16:21:51.609209946+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T16:21:52.821596171+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T16:21:52.821771629+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T16:21:52.985493183+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T16:21:52.985624894+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T16:21:52.985673248+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T16:21:52.986122965+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T16:21:52.98656798+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T16:21:52.986785717+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true,"admin_count":1}
{"time":"2025-09-06T16:21:52.986938863+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T16:22:02.502657206+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/start","chat_id":456230761,"message_type":"command","command":"start"}
{"time":"2025-09-06T16:22:51.551768899+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/start","chat_id":456230761,"message_type":"command","command":"start"}
{"time":"2025-09-06T16:22:51.640659038+02:00","level":"INFO","msg":"New user notification sent to admin","env":"local","component":"telegram_bot","admin_id":508225490,"new_user_id":456230761,"new_user_name":"Владислава Науменко"}
{"time":"2025-09-06T16:23:24.070326206+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"auth_approve_456230761","chat_id":508225490}
{"time":"2025-09-06T16:23:24.264430091+02:00","level":"INFO","msg":"Authorization notification sent to user","env":"local","component":"telegram_bot","user_id":456230761,"authorized_by":508225490}
{"time":"2025-09-06T16:23:24.316311335+02:00","level":"INFO","msg":"User authorized via admin callback","env":"local","component":"telegram_bot","admin_id":508225490,"target_user_id":456230761}
{"time":"2025-09-06T16:30:02.174788923+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T16:30:02.174903488+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T16:30:02.174935321+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T16:30:02.174967337+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T16:30:04.09189601+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T16:30:04.091996186+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T16:30:04.224763019+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T16:30:04.224830837+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T16:30:04.224846253+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T16:30:04.225121482+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T16:30:04.225210945+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T16:30:04.225274813+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true,"admin_count":1}
{"time":"2025-09-06T16:30:04.225306628+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T16:32:08.842715857+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/start","chat_id":456230761,"message_type":"command","command":"start"}
{"time":"2025-09-06T16:32:08.930154369+02:00","level":"INFO","msg":"New user notification sent to admin","env":"local","component":"telegram_bot","admin_id":508225490,"new_user_id":456230761,"new_user_name":"Владислава Науменко"}
{"time":"2025-09-06T16:32:23.467956037+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"auth_approve_456230761","chat_id":508225490}
{"time":"2025-09-06T16:32:23.610663316+02:00","level":"INFO","msg":"Authorization notification sent to user","env":"local","component":"telegram_bot","user_id":456230761,"authorized_by":508225490}
{"time":"2025-09-06T16:32:23.656684496+02:00","level":"INFO","msg":"User authorized via admin callback","env":"local","component":"telegram_bot","admin_id":508225490,"target_user_id":456230761}
{"time":"2025-09-06T16:32:36.045857472+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/help","chat_id":456230761,"message_type":"command","command":"help"}
{"time":"2025-09-06T16:33:02.977084226+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/status","chat_id":456230761,"message_type":"command","command":"status"}
{"time":"2025-09-06T16:33:12.911912906+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/authorize","chat_id":456230761,"message_type":"command","command":"authorize"}
{"time":"2025-09-06T16:33:19.425773135+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/help","chat_id":456230761,"message_type":"command","command":"help"}
{"time":"2025-09-06T16:33:30.862379879+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/help","chat_id":508225490,"message_type":"command","command":"help"}
{"time":"2025-09-06T16:33:51.058137721+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/myid","chat_id":456230761,"message_type":"command","command":"myid"}
{"time":"2025-09-06T16:34:02.776168528+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/users","chat_id":456230761,"message_type":"command","command":"users"}
{"time":"2025-09-06T16:34:06.16689187+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/users","chat_id":508225490,"message_type":"command","command":"users"}
{"time":"2025-09-06T16:37:15.899038845+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/start","chat_id":456230761,"message_type":"command","command":"start"}
{"time":"2025-09-06T16:37:18.383196452+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/help","chat_id":456230761,"message_type":"command","command":"help"}
{"time":"2025-09-06T16:56:55.778053758+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T16:56:55.778215445+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T16:56:55.945806664+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T16:56:55.945973471+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T16:56:55.946021041+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T16:56:55.946514839+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T16:56:55.946676466+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T16:56:55.946864726+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T16:56:55.9469747+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T16:56:55.947063483+02:00","level":"ERROR","msg":"HTTP server error","env":"local","error":"failed to listen: listen tcp4 0.0.0.0:3001: bind: address already in use"}
{"time":"2025-09-06T16:57:32.722418561+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T16:57:32.722526894+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T16:57:32.72255711+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T16:57:32.722593005+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T16:57:34.976658965+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T16:57:34.976813549+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T16:57:34.976863361+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T16:57:34.976911155+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T16:57:37.091911525+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T16:57:37.092106149+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T16:57:37.247499554+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T16:57:37.247570104+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T16:57:37.247591979+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T16:57:37.247784055+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T16:57:37.248206666+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T16:57:37.24838339+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T16:57:37.248480286+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T16:57:53.357553983+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/start","chat_id":508225490,"message_type":"command","command":"start"}
{"time":"2025-09-06T16:57:55.721625394+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/help","chat_id":508225490,"message_type":"command","command":"help"}
{"time":"2025-09-06T16:57:59.572833122+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/users","chat_id":508225490,"message_type":"command","command":"users"}
{"time":"2025-09-06T17:19:17.694375895+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T17:19:17.694575951+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T17:19:17.694629735+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T17:19:17.694678167+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T17:19:17.69480882+02:00","level":"INFO","msg":"Telegram service stopped","env":"local"}
{"time":"2025-09-06T17:28:19.283044375+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T17:28:19.28316032+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T17:28:19.43651057+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T17:28:19.436585162+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T17:28:19.436606517+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T17:28:19.437115126+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T17:28:19.437132927+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T17:28:19.437168666+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T17:28:19.437195288+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T17:28:31.90812558+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/help","chat_id":508225490,"message_type":"command","command":"help"}
{"time":"2025-09-06T17:31:23.966561666+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T17:31:23.966733744+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T17:31:23.966785262+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T17:31:23.966851944+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T17:31:25.190837074+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T17:31:25.190972462+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T17:31:25.352287234+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T17:31:25.352404684+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T17:31:25.352454129+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T17:31:25.35309172+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T17:31:25.353484038+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T17:31:25.353698421+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T17:31:25.353820603+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T17:31:35.745945218+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/help","chat_id":508225490,"message_type":"command","command":"help"}
{"time":"2025-09-06T17:31:47.655664723+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/families","chat_id":508225490,"message_type":"command","command":"families"}
{"time":"2025-09-06T17:31:51.27391733+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/createfamily","chat_id":508225490,"message_type":"command","command":"createfamily"}
{"time":"2025-09-06T17:31:51.318074104+02:00","level":"ERROR","msg":"Failed to send message","env":"local","error":"Bad Request: can't parse entities: Unsupported start tag \"name\" at byte offset 55","chat_id":508225490}
{"time":"2025-09-06T17:32:50.060926271+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/createfamily Семья","chat_id":508225490,"message_type":"command","command":"createfamily"}
{"time":"2025-09-06T17:33:41.598888985+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/addfamilymember Семья 456230761","chat_id":508225490,"message_type":"command","command":"addfamilymember"}
{"time":"2025-09-06T17:33:41.69563356+02:00","level":"INFO","msg":"Sent family member notification","env":"local","family_name":"Семья","new_member_id":456230761,"added_by_id":508225490}
{"time":"2025-09-06T17:34:23.13067713+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"/families","chat_id":456230761,"message_type":"command","command":"families"}
{"time":"2025-09-06T17:36:53.234713957+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/families","chat_id":508225490,"message_type":"command","command":"families"}
{"time":"2025-09-06T17:37:12.759783277+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/users","chat_id":508225490,"message_type":"command","command":"users"}
{"time":"2025-09-06T17:47:35.356745644+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T17:47:35.356927403+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T17:47:35.356977936+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T17:47:35.357078124+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T17:47:35.357222736+02:00","level":"INFO","msg":"Telegram service stopped","env":"local"}
{"time":"2025-09-06T17:47:52.235266518+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T17:47:52.235430428+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T17:47:52.425990018+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T17:47:52.426059181+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T17:47:52.426080709+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T17:47:52.426436436+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T17:47:52.426853616+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T17:47:52.427077528+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T17:47:52.42721428+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T17:48:09.824202335+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/help","chat_id":508225490,"message_type":"command","command":"help"}
{"time":"2025-09-06T17:48:14.205493829+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/createlist","chat_id":508225490,"message_type":"command","command":"createlist"}
{"time":"2025-09-06T17:48:16.941844034+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"createlist_family_e204dcfd-b89d-4cc5-93d1-1c1a29e2f724","chat_id":508225490}
{"time":"2025-09-06T17:48:17.113630294+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"creating_list_for_family","value":"e204dcfd-b89d-4cc5-93d1-1c1a29e2f724"}
{"time":"2025-09-06T17:48:37.082001828+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"На субботу","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T18:01:26.606403818+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T18:01:26.606556443+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T18:01:26.606608587+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T18:01:26.606677574+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T18:01:28.015290687+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T18:01:28.015398086+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T18:01:28.160484124+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T18:01:28.16055922+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T18:01:28.160582148+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T18:01:28.161112469+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T18:01:28.161146426+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T18:01:28.161305187+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T18:01:28.161462999+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T18:01:36.569049056+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/createlist","chat_id":508225490,"message_type":"command","command":"createlist"}
{"time":"2025-09-06T18:01:41.519034721+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/status","chat_id":508225490,"message_type":"command","command":"status"}
{"time":"2025-09-06T18:01:43.919522218+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/help","chat_id":508225490,"message_type":"command","command":"help"}
{"time":"2025-09-06T18:01:45.94486667+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/lists","chat_id":508225490,"message_type":"command","command":"lists"}
{"time":"2025-09-06T18:02:10.735581812+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/createlist","chat_id":508225490,"message_type":"command","command":"createlist"}
{"time":"2025-09-06T18:02:12.223531752+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"createlist_family_e204dcfd-b89d-4cc5-93d1-1c1a29e2f724","chat_id":508225490}
{"time":"2025-09-06T18:02:12.334842607+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"creating_list_for_family","value":"e204dcfd-b89d-4cc5-93d1-1c1a29e2f724"}
{"time":"2025-09-06T18:02:19.893234775+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"На субботу","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T18:02:26.55155826+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/lists","chat_id":508225490,"message_type":"command","command":"lists"}
{"time":"2025-09-06T18:09:27.980107937+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T18:09:27.980324095+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T18:09:27.980467049+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T18:09:27.980521171+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T18:09:29.496499257+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T18:09:29.496686493+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T18:09:29.6475768+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T18:09:29.647701279+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T18:09:29.647733118+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T18:09:29.648058153+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T18:09:29.648698383+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T18:09:29.649064841+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T18:09:29.650019255+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T18:09:37.137738309+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/createlist","chat_id":508225490,"message_type":"command","command":"createlist"}
{"time":"2025-09-06T18:09:40.41921588+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"createlist_family_e204dcfd-b89d-4cc5-93d1-1c1a29e2f724","chat_id":508225490}
{"time":"2025-09-06T18:09:40.574822348+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"creating_list_for_family","value":"e204dcfd-b89d-4cc5-93d1-1c1a29e2f724"}
{"time":"2025-09-06T18:09:45.669892713+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"на субботу","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T18:09:45.680170345+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"creating_list_for_family"}
{"time":"2025-09-06T18:09:45.949933152+02:00","level":"INFO","msg":"Sent family new list notification","env":"local","member_telegram_id":456230761,"list_name":"на субботу","family_name":"Семья","created_by":"@washerd"}
{"time":"2025-09-06T18:09:50.138923585+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:09:53.494148853+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:09:53.608348936+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T18:10:03.424608944+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"молоко и сір","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T18:10:03.454144832+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T18:10:03.571488313+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"молоко и сір","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T18:10:35.247954632+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:35.321344354+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:10:36.979008743+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:37.056886226+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:10:39.630173878+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:39.821228353+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T18:10:43.503024021+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:43.56611073+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:10:45.809682445+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:45.894612394+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:10:48.648815247+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"show_all_lists","chat_id":456230761}
{"time":"2025-09-06T18:10:50.631475306+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:50.685208126+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:10:52.723713234+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:52.789686243+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:10:59.065540008+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:10:59.128532751+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:11:30.475927544+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:11:30.531866618+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:11:32.097877772+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T18:11:32.157677581+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: BUTTON_DATA_INVALID"}
{"time":"2025-09-06T18:14:05.287452186+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T18:14:05.28760121+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T18:14:05.287637307+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T18:14:05.28769719+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T18:14:07.303219487+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T18:14:07.303337522+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T18:14:07.480508821+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T18:14:07.480591221+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T18:14:07.480617672+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T18:14:07.481110248+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T18:14:07.481390573+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T18:14:07.481617511+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T18:14:07.481753188+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T18:14:26.429511257+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:14:30.565159144+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_a7906e1d","chat_id":508225490}
{"time":"2025-09-06T18:14:30.735381789+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"молоко и сір","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T18:14:32.076869071+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_a7906e1d","chat_id":508225490}
{"time":"2025-09-06T18:14:32.305313947+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_uncompleted_notification","item_name":"молоко и сір","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T18:14:39.722101773+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"show_all_lists","chat_id":508225490}
{"time":"2025-09-06T18:14:40.830632046+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:14:41.63128213+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:14:41.903567917+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T18:14:42.807936865+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:28:44.437766631+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T18:28:44.437931493+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T18:28:44.437986649+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T18:28:44.438053173+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T18:55:12.891335787+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T18:55:12.891496325+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T18:55:13.049400187+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T18:55:13.049530223+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T18:55:13.049581989+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T18:55:13.050086771+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T18:55:13.050506663+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T18:55:13.05059596+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T18:55:13.050668453+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T18:57:29.121539989+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T18:57:29.244973151+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T18:57:46.005820432+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Молоко, сыр, багет","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T18:57:46.012868835+02:00","level":"ERROR","msg":"Failed to add item to list","env":"local","error":"failed to add item to list: ERROR: column \"display_name\" of relation \"shopping_items\" does not exist (SQLSTATE 42703)"}
{"time":"2025-09-06T19:11:02.004447007+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T19:11:02.004608734+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T19:11:02.004667234+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T19:11:02.00476757+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T19:11:02.004992028+02:00","level":"INFO","msg":"Telegram service stopped","env":"local"}
{"time":"2025-09-06T19:11:03.108841641+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T19:11:03.109254466+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T19:11:03.261156704+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T19:11:03.261293105+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T19:11:03.261344485+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T19:11:03.261735191+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T19:11:03.262130636+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T19:11:03.26222653+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T19:11:03.262305925+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T19:12:00.126301589+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Молоко, сыр, багет","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T19:12:02.122475534+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"/lists","chat_id":508225490,"message_type":"command","command":"lists"}
{"time":"2025-09-06T19:12:03.681753625+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T19:12:05.245099949+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T19:12:05.378262687+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T19:12:08.243640469+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Молоко, сыр, багет","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T19:12:08.261055097+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T19:12:08.339155453+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"Молоко, сыр, багет","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T19:14:38.694066781+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T19:14:38.810221069+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T19:14:42.072598256+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T19:14:45.123983817+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T19:14:45.296621635+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T19:14:47.856197355+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T19:14:53.285752711+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T19:14:53.475410146+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T19:14:57.792930466+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"Яблока","chat_id":456230761,"message_type":"text","command":""}
{"time":"2025-09-06T19:14:57.806279355+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list"}
{"time":"2025-09-06T19:14:57.889850531+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":508225490,"template_name":"item_added_notification","item_name":"Яблока","list_name":"на субботу","actor":"Владислава"}
{"time":"2025-09-06T19:16:53.85452917+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T19:16:53.85464648+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T19:16:53.854676763+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T19:16:53.85472182+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T19:16:53.854839897+02:00","level":"INFO","msg":"Telegram service stopped","env":"local"}
{"time":"2025-09-06T19:16:55.835200858+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T19:16:55.835322746+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T19:16:55.83547548+02:00","level":"WARN","msg":"OPENAI_API_KEY not set, using mock AI client","env":"local"}
{"time":"2025-09-06T19:16:55.987059708+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T19:16:55.987129095+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T19:16:55.987153542+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T19:16:55.987644114+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T19:16:55.987984186+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T19:16:55.988121374+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T19:16:55.988314418+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T19:17:15.90546275+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T19:17:20.637828626+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":456230761,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":456230761}
{"time":"2025-09-06T19:17:20.758667558+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T19:17:27.672720009+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":456230761,"username":"","message":"Картошка","chat_id":456230761,"message_type":"text","command":""}
{"time":"2025-09-06T19:17:27.694036537+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":456230761,"state":"adding_item_to_list"}
{"time":"2025-09-06T19:17:27.786048046+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":508225490,"template_name":"item_added_notification","item_name":"Картошка","list_name":"на субботу","actor":"Владислава"}
{"time":"2025-09-06T19:17:44.330087689+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T19:17:46.1552893+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T19:17:46.390423898+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T19:17:52.564550041+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Картошка, багет","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T19:17:52.575319045+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T19:17:52.642228475+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"Картошка, багет","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T19:17:56.801149901+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:30:00.905778869+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T20:30:00.905876061+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T20:30:00.905907103+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T20:30:00.905937828+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T20:33:12.290710039+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T20:33:12.290821677+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T20:33:12.290946426+02:00","level":"WARN","msg":"OPENAI_API_KEY not set, using mock AI client","env":"local"}
{"time":"2025-09-06T20:33:12.453660732+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T20:33:12.453744162+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T20:33:12.453768742+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T20:33:12.454297365+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T20:33:12.454564904+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T20:33:12.454669672+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T20:33:12.45483381+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T20:33:56.253852007+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"show_all_lists","chat_id":508225490}
{"time":"2025-09-06T20:33:57.856492668+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:34:01.526752708+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:34:01.600125201+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message"}
{"time":"2025-09-06T20:34:20.67287923+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:34:22.224606881+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:34:22.435742046+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T20:34:44.348742199+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"молоко , ріба 2 филе, картошка 1 кг","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T20:34:44.350783489+02:00","level":"INFO","msg":"Successfully parsed multiple items with AI","env":"local","raw_text":"молоко , ріба 2 филе, картошка 1 кг","language":"en","items_count":3}
{"time":"2025-09-06T20:34:44.355027947+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"milk","parsed":"milk","category":"dairy","confidence":0.95}
{"time":"2025-09-06T20:34:44.356736323+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"ріба 2 филе","parsed":"ріба 2 филе","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:34:44.357841913+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"картошка 1 кг","parsed":"картошка 1 кг","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:34:44.357884056+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T20:34:44.44404179+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"milk","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:34:44.469737733+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"картошка 1 кг","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:34:44.493600284+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"ріба 2 филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:34:51.386915165+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:43:16.161096727+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T20:43:16.161196388+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T20:43:16.161232251+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T20:43:16.161289768+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T20:43:17.980190897+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T20:43:17.98035595+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T20:43:17.980607837+02:00","level":"WARN","msg":"OPENAI_API_KEY not set, using mock AI client","env":"local"}
{"time":"2025-09-06T20:43:18.138507978+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T20:43:18.138593508+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T20:43:18.138619309+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T20:43:18.13885567+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T20:43:18.139448574+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T20:43:18.139550513+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T20:43:18.139681017+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T20:43:48.13890417+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:43:48.399054313+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T20:43:54.207928466+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T20:43:54.221987141+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7,"item_index":1,"total_items":15}
{"time":"2025-09-06T20:43:54.226556601+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7,"item_index":2,"total_items":15}
{"time":"2025-09-06T20:43:54.23008528+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7,"item_index":3,"total_items":15}
{"time":"2025-09-06T20:43:54.234029967+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7,"item_index":4,"total_items":15}
{"time":"2025-09-06T20:43:54.238974831+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7,"item_index":5,"total_items":15}
{"time":"2025-09-06T20:43:54.243605451+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7,"item_index":6,"total_items":15}
{"time":"2025-09-06T20:43:54.247517676+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7,"item_index":7,"total_items":15}
{"time":"2025-09-06T20:43:54.25094425+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7,"item_index":8,"total_items":15}
{"time":"2025-09-06T20:43:54.254317121+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7,"item_index":9,"total_items":15}
{"time":"2025-09-06T20:43:54.25752576+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7,"item_index":10,"total_items":15}
{"time":"2025-09-06T20:43:54.261119574+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"bread","parsed":"bread","category":"bakery","confidence":0.95,"item_index":11,"total_items":15}
{"time":"2025-09-06T20:43:54.264707366+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7,"item_index":12,"total_items":15}
{"time":"2025-09-06T20:43:54.267535758+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7,"item_index":13,"total_items":15}
{"time":"2025-09-06T20:43:54.27031979+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7,"item_index":14,"total_items":15}
{"time":"2025-09-06T20:43:54.272638882+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7,"item_index":15,"total_items":15}
{"time":"2025-09-06T20:43:54.272657703+02:00","level":"INFO","msg":"Successfully parsed and stored items with AI","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","total_parsed":15,"successfully_stored":15}
{"time":"2025-09-06T20:43:54.274666146+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.275512768+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.276362329+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.277199471+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.27803892+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.278851946+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.279524092+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.280088749+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.280692293+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.281225652+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.281772574+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"bread","parsed":"bread","category":"bakery","confidence":0.95}
{"time":"2025-09-06T20:43:54.282347027+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.283000764+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.283577762+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.284119044+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:43:54.284132985+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T20:43:54.370189268+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"морковка 0","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.392846973+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.411347066+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"5 кг","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.436005832+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.456861583+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"лист салата","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.47733938+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"филе курицы 1 маленькая уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.50561211+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"где овощи - салат цезарь","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.529402143+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"сливки","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.55878636+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"мочалки для посуды. овощи- 3 огурца","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.581589317+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"bread","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.59857946+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кролик","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.622503701+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"пол капусты","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.651367532+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"1 пачка кукурузы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.676339993+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"рыба красная филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:43:54.700506372+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"голубика 1 уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:44:06.494012274+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:44:12.484559149+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_80331bd1","chat_id":508225490}
{"time":"2025-09-06T20:44:12.62176956+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"milk","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:44:13.977780454+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_aecff523","chat_id":508225490}
{"time":"2025-09-06T20:44:14.126547525+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"картошка 1 кг","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:44:15.238859998+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_8e271ed0","chat_id":508225490}
{"time":"2025-09-06T20:44:15.400631837+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:55:58.56251902+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:56:00.088976297+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:56:00.360867356+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T20:56:02.566686729+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T20:56:02.57990098+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7,"item_index":1,"total_items":15}
{"time":"2025-09-06T20:56:02.582361262+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7,"item_index":2,"total_items":15}
{"time":"2025-09-06T20:56:02.58502271+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7,"item_index":3,"total_items":15}
{"time":"2025-09-06T20:56:02.588050695+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7,"item_index":4,"total_items":15}
{"time":"2025-09-06T20:56:02.591870012+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7,"item_index":5,"total_items":15}
{"time":"2025-09-06T20:56:02.59561757+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7,"item_index":6,"total_items":15}
{"time":"2025-09-06T20:56:02.598176337+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7,"item_index":7,"total_items":15}
{"time":"2025-09-06T20:56:02.600771472+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7,"item_index":8,"total_items":15}
{"time":"2025-09-06T20:56:02.603708676+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7,"item_index":9,"total_items":15}
{"time":"2025-09-06T20:56:02.607475046+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7,"item_index":10,"total_items":15}
{"time":"2025-09-06T20:56:02.611585188+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"bread","parsed":"bread","category":"bakery","confidence":0.95,"item_index":11,"total_items":15}
{"time":"2025-09-06T20:56:02.615594984+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7,"item_index":12,"total_items":15}
{"time":"2025-09-06T20:56:02.619180251+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7,"item_index":13,"total_items":15}
{"time":"2025-09-06T20:56:02.621606901+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7,"item_index":14,"total_items":15}
{"time":"2025-09-06T20:56:02.624050574+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7,"item_index":15,"total_items":15}
{"time":"2025-09-06T20:56:02.624093125+02:00","level":"INFO","msg":"Successfully parsed and stored items with AI","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","total_parsed":15,"successfully_stored":15}
{"time":"2025-09-06T20:56:02.625789146+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.626925247+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.628050152+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.629186905+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.63080132+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.632213593+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.633386708+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.634381476+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.635406353+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.636412071+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.639735759+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"bread","parsed":"bread","category":"bakery","confidence":0.95}
{"time":"2025-09-06T20:56:02.640721032+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.641657745+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.642587324+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.643739991+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:02.643801251+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T20:56:02.780402272+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"лист салата","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.80518521+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кролик","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.822504071+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"мочалки для посуды. овощи- 3 огурца","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.864662174+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"морковка 0","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.878382547+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"сливки","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.89884679+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"1 пачка кукурузы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.92252073+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"голубика 1 уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.94752472+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:02.977702331+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:03.00564071+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"bread","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:03.042904281+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"филе курицы 1 маленькая уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:03.070519355+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"пол капусты","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:03.093910492+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"5 кг","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:03.127074645+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"где овощи - салат цезарь","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:03.150843463+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"рыба красная филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:37.436573528+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"show_all_lists","chat_id":508225490}
{"time":"2025-09-06T20:56:38.807615706+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:56:44.096353903+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T20:56:44.096436596+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T20:56:44.096462936+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T20:56:44.096500405+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T20:56:44.096629046+02:00","level":"INFO","msg":"Telegram service stopped","env":"local"}
{"time":"2025-09-06T20:56:45.38510919+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T20:56:45.385298934+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T20:56:45.385582408+02:00","level":"WARN","msg":"OPENAI_API_KEY not set, using mock AI client","env":"local"}
{"time":"2025-09-06T20:56:45.549104536+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T20:56:45.54925043+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T20:56:45.549281805+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T20:56:45.549668808+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T20:56:45.550066424+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T20:56:45.550196173+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T20:56:45.550391958+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T20:56:48.036359226+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:56:48.156440549+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message"}
{"time":"2025-09-06T20:56:49.361808089+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T20:56:49.804586795+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T20:56:52.562334352+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T20:56:52.575310292+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7,"item_index":1,"total_items":15}
{"time":"2025-09-06T20:56:52.579148452+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7,"item_index":2,"total_items":15}
{"time":"2025-09-06T20:56:52.582006964+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7,"item_index":3,"total_items":15}
{"time":"2025-09-06T20:56:52.585816697+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7,"item_index":4,"total_items":15}
{"time":"2025-09-06T20:56:52.588887757+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7,"item_index":5,"total_items":15}
{"time":"2025-09-06T20:56:52.591573515+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7,"item_index":6,"total_items":15}
{"time":"2025-09-06T20:56:52.593962298+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7,"item_index":7,"total_items":15}
{"time":"2025-09-06T20:56:52.596123755+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7,"item_index":8,"total_items":15}
{"time":"2025-09-06T20:56:52.598067338+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7,"item_index":9,"total_items":15}
{"time":"2025-09-06T20:56:52.600039312+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7,"item_index":10,"total_items":15}
{"time":"2025-09-06T20:56:52.602224753+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"bread","parsed":"bread","category":"bakery","confidence":0.95,"item_index":11,"total_items":15}
{"time":"2025-09-06T20:56:52.604332534+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7,"item_index":12,"total_items":15}
{"time":"2025-09-06T20:56:52.606321286+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7,"item_index":13,"total_items":15}
{"time":"2025-09-06T20:56:52.608289723+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7,"item_index":14,"total_items":15}
{"time":"2025-09-06T20:56:52.610329217+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7,"item_index":15,"total_items":15}
{"time":"2025-09-06T20:56:52.610355471+02:00","level":"INFO","msg":"Successfully parsed and stored items with AI","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","total_parsed":15,"successfully_stored":15}
{"time":"2025-09-06T20:56:52.61147844+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.612296349+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.613016026+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.61373503+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.614482405+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.615159386+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.61573235+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.616356262+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.616958115+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.617560765+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.618198223+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"bread","parsed":"bread","category":"bakery","confidence":0.95}
{"time":"2025-09-06T20:56:52.61884544+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.619502707+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.620149783+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.620867088+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7}
{"time":"2025-09-06T20:56:52.620916107+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T20:56:52.704125051+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"пол капусты","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.728618738+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"рыба красная филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.760889384+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"где овощи - салат цезарь","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.790097544+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"филе курицы 1 маленькая уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.826197155+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"сливки","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.860613858+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кролик","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.883513828+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"bread","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.907904767+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"5 кг","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.939128072+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"голубика 1 уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.960083898+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"морковка 0","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:52.984776833+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"лист салата","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:53.005026857+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:53.051287649+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:53.071144198+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"мочалки для посуды. овощи- 3 огурца","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:56:53.093648727+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"1 пачка кукурузы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T20:57:05.608291182+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:06:29.644431654+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T21:06:29.644543239+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T21:06:29.64457238+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T21:06:29.644600877+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T21:06:31.288073127+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T21:06:31.288181886+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T21:06:31.288336933+02:00","level":"WARN","msg":"OPENAI_API_KEY not set, using mock AI client","env":"local"}
{"time":"2025-09-06T21:06:31.460263202+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T21:06:31.460342713+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T21:06:31.460370927+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T21:06:31.460658343+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T21:06:31.461198202+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T21:06:31.461321057+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T21:06:31.461370364+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T21:07:03.358457714+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:07:06.226781434+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:07:06.346907443+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T21:07:08.46996723+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:07:08.473297596+02:00","level":"INFO","msg":"Starting AI parsing","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:07:08.473517978+02:00","level":"INFO","msg":"AI parsing completed","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","results_count":15}
{"time":"2025-09-06T21:07:08.473549741+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":1,"standardized_name":"щетка на швабру","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473611608+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":2,"standardized_name":"туалетная бумага","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473628863+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":3,"standardized_name":"мочалки для посуды. овощи- 3 огурца","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473647632+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":4,"standardized_name":"1 пачка кукурузы","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473665659+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":5,"standardized_name":"лист салата","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473683501+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":6,"standardized_name":"морковка 0","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.47369791+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":7,"standardized_name":"5 кг","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"kg","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473714223+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":8,"standardized_name":"голубика 1 уп","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.47373722+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":9,"standardized_name":"пол капусты","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473754052+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":10,"standardized_name":"где овощи - салат цезарь","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473772586+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":11,"standardized_name":"bread","category":"bakery","subcategory":"bread","quantity_value":null,"quantity_unit":"L","confidence_score":0.95}
{"time":"2025-09-06T21:07:08.473789273+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":12,"standardized_name":"рыба красная филе","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473806808+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":13,"standardized_name":"кролик","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.47382482+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":14,"standardized_name":"филе курицы 1 маленькая уп","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.473844359+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":15,"standardized_name":"сливки","category":"grocery","subcategory":"unknown","quantity_value":null,"quantity_unit":"L","confidence_score":0.7}
{"time":"2025-09-06T21:07:08.483836097+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7,"item_index":1,"total_items":15}
{"time":"2025-09-06T21:07:08.487659395+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7,"item_index":2,"total_items":15}
{"time":"2025-09-06T21:07:08.490621815+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7,"item_index":3,"total_items":15}
{"time":"2025-09-06T21:07:08.493266134+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7,"item_index":4,"total_items":15}
{"time":"2025-09-06T21:07:08.495634111+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7,"item_index":5,"total_items":15}
{"time":"2025-09-06T21:07:08.498012261+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7,"item_index":6,"total_items":15}
{"time":"2025-09-06T21:07:08.500041456+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7,"item_index":7,"total_items":15}
{"time":"2025-09-06T21:07:08.502019534+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7,"item_index":8,"total_items":15}
{"time":"2025-09-06T21:07:08.503693264+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7,"item_index":9,"total_items":15}
{"time":"2025-09-06T21:07:08.50544359+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7,"item_index":10,"total_items":15}
{"time":"2025-09-06T21:07:08.507451987+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"bread","parsed":"bread","category":"bakery","confidence":0.95,"item_index":11,"total_items":15}
{"time":"2025-09-06T21:07:08.509276398+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7,"item_index":12,"total_items":15}
{"time":"2025-09-06T21:07:08.510977565+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7,"item_index":13,"total_items":15}
{"time":"2025-09-06T21:07:08.512632854+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7,"item_index":14,"total_items":15}
{"time":"2025-09-06T21:07:08.514367943+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7,"item_index":15,"total_items":15}
{"time":"2025-09-06T21:07:08.514387496+02:00","level":"INFO","msg":"Successfully parsed and stored items with AI","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","total_parsed":15,"successfully_stored":15}
{"time":"2025-09-06T21:07:08.515271394+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"щетка на швабру","parsed":"щетка на швабру","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.515904972+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"туалетная бумага","parsed":"туалетная бумага","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.516503691+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"мочалки для посуды. овощи- 3 огурца","parsed":"мочалки для посуды. овощи- 3 огурца","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.517097249+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"1 пачка кукурузы","parsed":"1 пачка кукурузы","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.517680145+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"лист салата","parsed":"лист салата","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.51829421+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"морковка 0","parsed":"морковка 0","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.518884768+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"5 кг","parsed":"5 кг","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.51952061+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"голубика 1 уп","parsed":"голубика 1 уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.520146707+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"пол капусты","parsed":"пол капусты","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.520816183+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"где овощи - салат цезарь","parsed":"где овощи - салат цезарь","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.521392359+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"bread","parsed":"bread","category":"bakery","confidence":0.95}
{"time":"2025-09-06T21:07:08.522075899+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"рыба красная филе","parsed":"рыба красная филе","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.522701296+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кролик","parsed":"кролик","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.523405042+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"филе курицы 1 маленькая уп","parsed":"филе курицы 1 маленькая уп","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.524063261+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"сливки","parsed":"сливки","category":"grocery","confidence":0.7}
{"time":"2025-09-06T21:07:08.524096021+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T21:07:08.609014166+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"филе курицы 1 маленькая уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.633828299+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.662957352+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"морковка 0","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.68441751+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"где овощи - салат цезарь","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.705258917+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"пол капусты","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.730593878+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.754816699+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"мочалки для посуды. овощи- 3 огурца","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.773271766+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"1 пачка кукурузы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.798986613+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"5 кг","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.823787671+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"голубика 1 уп","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.844599205+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"bread","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.866222465+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кролик","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.891336231+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"рыба красная филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.91207475+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"сливки","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:07:08.933183611+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"лист салата","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:14:09.961326431+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T21:14:09.961486182+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T21:14:09.961545476+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T21:14:09.96165006+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T21:14:09.961817125+02:00","level":"INFO","msg":"Telegram service stopped","env":"local"}
{"time":"2025-09-06T21:15:26.500359862+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T21:15:26.500549226+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T21:15:26.645691325+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T21:15:26.645725294+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T21:15:26.645732502+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T21:15:26.645867373+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T21:15:26.646299118+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T21:15:26.646341558+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T21:15:26.646373163+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T21:15:33.59033239+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:15:35.068131669+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:15:35.137401291+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message"}
{"time":"2025-09-06T21:15:39.958485158+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:17:16.412921091+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:17:16.465419642+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message"}
{"time":"2025-09-06T21:17:24.283453954+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:17:24.399618263+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T21:17:33.231410667+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:17:33.233056562+02:00","level":"INFO","msg":"Starting AI parsing","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:17:33.233265371+02:00","level":"INFO","msg":"Built multi-item prompt for AI","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","prompt_length":8497,"prompt_preview":"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\n\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\n[\n  {\n    \"standardized_name\": \"standardized item name in the same language\",\n    \"category\": \"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\",\n    \"subcategory\": \"specific typ..."}
{"time":"2025-09-06T21:17:33.233407863+02:00","level":"INFO","msg":"[MULTI] Sending request to OpenAI Responses API","env":"local","url":"https://api.openai.com/v1/responses","model":"gpt-5-nano","api_key_prefix":"sk-proj-Zq...","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","request_body":"{\"model\":\"gpt-5-nano\",\"input\":\"Input: Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\nLanguage: en\",\"instructions\":\"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and extract multiple items if present. Respond ONLY with valid JSON array.\\n\\nYou are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\\n[\\n  {\\n    \\\"standardized_name\\\": \\\"standardized item name in the same language\\\",\\n    \\\"category\\\": \\\"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\\\",\\n    \\\"subcategory\\\": \\\"specific type (e.g., milk, chicken, carrots)\\\",\\n    \\\"quantity_value\\\": 2.5,\\n    \\\"quantity_unit\\\": \\\"unit (kg, L, pieces, etc.)\\\",\\n    \\\"confidence_score\\\": 0.95\\n  }\\n]\\n\\nRules:\\n- Intelligently separate items even without commas (e.g., \\\"milk bread eggs\\\" → 3 items)\\n- Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities\\n- CRITICAL: Always preserve the original language in standardized_name (молоко stays молоко, NOT milk)\\n- Categories and subcategories should be in English\\n- CRITICAL: Extract quantities correctly, including decimals with comma separators\\n- \\\"0,5 кг\\\" means 0.5 kilograms - DO NOT split this into \\\"0\\\" and \\\"5 кг\\\"\\n- \\\"1,5 л\\\" means 1.5 liters - keep as one item with quantity_value: 1.5\\n- Convert European decimal commas to dots: \\\"0,5\\\" → quantity_value: 0.5\\n- Separate complex sentences into individual items (e.g., \\\"мочалки для посуды. овощи- 3 огурца\\\" → 2 items)\\n- Handle variations like \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\" (fix typos but keep language)\\n- NEVER translate item names to other languages - keep them exactly as provided\\n- If no quantity is found, omit quantity_value and set quantity_unit to \\\"pieces\\\"\\n- confidence_score should be between 0.0 and 1.0\\n\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\n## Standard Categories and Subcategories:\\n\\n### dairy\\n- milk, yogurt, cheese, butter, cream, cottage_cheese, sour_cream\\n\\n### meat\\n- chicken, beef, pork, lamb, turkey, fish, seafood, sausage, ham\\n\\n### produce  \\n- fruits: apple, banana, orange, berries, grapes\\n- vegetables: carrot, onion, potato, tomato, lettuce, cucumber\\n\\n### pantry\\n- rice, pasta, flour, sugar, salt, oil, vinegar, spices, canned_goods\\n\\n### beverages\\n- water, juice, soda, coffee, tea, alcohol, milk_alternatives\\n\\n### bakery\\n- bread, rolls, bagels, pastry, cake, cookies\\n\\n### household\\n- cleaning_supplies, paper_products, personal_care, laundry\\n\\n### frozen\\n- frozen_vegetables, frozen_meals, ice_cream, frozen_meat\\n\\n### snacks\\n- chips, crackers, nuts, candy, chocolate\\n\\n## Quantity Units:\\nCommon units to recognize and standardize:\\n- Weight: kg, g, lb, oz\\n- Volume: L, ml, cup, pint, gallon\\n- Count: pieces, pack, box, bottle, can, bag\\n- Length: cm, inch (for items like aluminum foil)\\n\\n## English Language Examples:\\n\\n### Basic Items:\\n- \\\"milk\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"bread\\\" → {\\\"standardized_name\\\": \\\"bread\\\", \\\"category\\\": \\\"bakery\\\", \\\"subcategory\\\": \\\"bread\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n\\n### With Quantities:\\n- \\\"milk 2L\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"L\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"chicken 1kg\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"kg\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples (2 bags)\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"bags\\\", \\\"confidence_score\\\": 0.95}\\n\\n### Common Typos/Variations:\\n- \\\"coffe\\\" → {\\\"standardized_name\\\": \\\"coffee\\\", \\\"category\\\": \\\"beverages\\\", \\\"subcategory\\\": \\\"coffee\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"tomatoe\\\" → {\\\"standardized_name\\\": \\\"tomato\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"chiken\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.85}\\n\\n### Ambiguous Cases:\\n- \\\"raw\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.7}\\n- \\\"green\\\" → {\\\"standardized_name\\\": \\\"lettuce\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.6}\\n\\n## Ambiguous Items and Context-Based Mappings:\\n\\n### High Ambiguity Cases (confidence \\u003c 0.8):\\nThese items require contextual inference and should have lower confidence scores:\\n\\n- \\\"raw\\\" → likely \\\"milk\\\" (dairy context)\\n- \\\"green\\\" → likely \\\"lettuce\\\" or \\\"herbs\\\" (produce context)  \\n- \\\"white\\\" → could be \\\"rice\\\", \\\"bread\\\", \\\"milk\\\" (context dependent)\\n- \\\"red\\\" → likely \\\"tomatoes\\\", \\\"apples\\\", or \\\"meat\\\" (context dependent)\\n- \\\"big\\\" → needs additional context\\n- \\\"small\\\" → needs additional context\\n- \\\"fresh\\\" → modifier, extract the actual item\\n\\n### Common Abbreviations:\\n- \\\"choc\\\" → \\\"chocolate\\\"\\n- \\\"veggies\\\" → \\\"vegetables\\\" \\n- \\\"fruits\\\" → \\\"mixed fruits\\\"\\n- \\\"meat\\\" → \\\"beef\\\" (default assumption)\\n- \\\"fish\\\" → \\\"fish\\\" (seafood category)\\n\\n### Context Clues:\\nWhen items are ambiguous, use these strategies:\\n1. Look for quantity units (2L suggests liquid like milk)\\n2. Consider common shopping patterns\\n3. Use lower confidence scores (0.6-0.8) for ambiguous items\\n4. Default to most common interpretation\\n\\n### Multi-word Items:\\n- \\\"olive oil\\\" → {\\\"standardized_name\\\": \\\"olive oil\\\", \\\"category\\\": \\\"pantry\\\", \\\"subcategory\\\": \\\"oil\\\"}\\n- \\\"ice cream\\\" → {\\\"standardized_name\\\": \\\"ice cream\\\", \\\"category\\\": \\\"frozen\\\", \\\"subcategory\\\": \\\"dessert\\\"}\\n- \\\"toilet paper\\\" → {\\\"standardized_name\\\": \\\"toilet paper\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"paper_products\\\"}\\n- \\\"washing powder\\\" → {\\\"standardized_name\\\": \\\"washing powder\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"laundry\\\"}\\n\\n## Multi-Item Parsing Task:\\nInput: \\\"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\\"\\nLanguage: en\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array. Consider:\\n1. Split items even without clear separators (e.g., \\\"milk bread eggs\\\" → 3 items)\\n2. Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities  \\n3. Preserve original language in standardized_name\\n4. Categories and subcategories should be in English\\n5. Extract individual quantities correctly per item\\n6. Handle variations and typos (e.g., \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\")\\n7. Use appropriate confidence scores based on ambiguity level\\n\\nCRITICAL DECIMAL PARSING EXAMPLES:\\n❌ WRONG: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]\\n✅ CORRECT: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\", \\\"quantity_value\\\": 0.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\n❌ WRONG: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]  \\n✅ CORRECT: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\", \\\"quantity_value\\\": 1.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\nOther correct examples:\\n- Input: \\\"молоко, сыр, багет\\\" → [{\\\"standardized_name\\\": \\\"молоко\\\"}, {\\\"standardized_name\\\": \\\"сыр\\\"}, {\\\"standardized_name\\\": \\\"багет\\\"}]\\n- Input: \\\"мочалки для посуды. овощи- 3 огурца\\\" → [{\\\"standardized_name\\\": \\\"мочалки для посуды\\\"}, {\\\"standardized_name\\\": \\\"огурцы\\\", \\\"quantity_value\\\": 3.0, \\\"quantity_unit\\\": \\\"pieces\\\"}]\\n- Input: \\\"хлеб 2 батона и молоко 1л\\\" → [{\\\"standardized_name\\\": \\\"хлеб\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"pieces\\\"}, {\\\"standardized_name\\\": \\\"молоко\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"L\\\"}]\\n\\nResponse format: JSON array of items, each with the structure specified above.\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\",\"max_tokens\":600,\"temperature\":0.1,\"store\":true,\"reasoning_effort\":\"medium\"}"}
{"time":"2025-09-06T21:17:33.865443438+02:00","level":"INFO","msg":"[MULTI] Received response from OpenAI Responses API","env":"local","status_code":400,"response_body":"{\n  \"error\": {\n    \"message\": \"Unsupported parameter: 'reasoning_effort'. In the Responses API, this parameter has moved to 'reasoning.effort'. Try again with the new parameter. See the API documentation for more information: https://platform.openai.com/docs/api-reference/responses/create.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": null,\n    \"code\": \"unsupported_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:17:33.865544821+02:00","level":"ERROR","msg":"[MULTI] OpenAI API error","env":"local","status_code":400,"response":"{\n  \"error\": {\n    \"message\": \"Unsupported parameter: 'reasoning_effort'. In the Responses API, this parameter has moved to 'reasoning.effort'. Try again with the new parameter. See the API documentation for more information: https://platform.openai.com/docs/api-reference/responses/create.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": null,\n    \"code\": \"unsupported_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:17:33.865619051+02:00","level":"ERROR","msg":"Failed to parse items with AI","env":"local","error":"responses API error: 400 - {\n  \"error\": {\n    \"message\": \"Unsupported parameter: 'reasoning_effort'. In the Responses API, this parameter has moved to 'reasoning.effort'. Try again with the new parameter. See the API documentation for more information: https://platform.openai.com/docs/api-reference/responses/create.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": null,\n    \"code\": \"unsupported_parameter\"\n  }\n}","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:17:33.865694441+02:00","level":"ERROR","msg":"AI parsing failed","env":"local","component":"shopping-service","error":"failed to parse items: responses API error: 400 - {\n  \"error\": {\n    \"message\": \"Unsupported parameter: 'reasoning_effort'. In the Responses API, this parameter has moved to 'reasoning.effort'. Try again with the new parameter. See the API documentation for more information: https://platform.openai.com/docs/api-reference/responses/create.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": null,\n    \"code\": \"unsupported_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:17:33.865722987+02:00","level":"ERROR","msg":"Failed to add items to list with AI","env":"local","error":"failed to parse items with AI: failed to parse items: responses API error: 400 - {\n  \"error\": {\n    \"message\": \"Unsupported parameter: 'reasoning_effort'. In the Responses API, this parameter has moved to 'reasoning.effort'. Try again with the new parameter. See the API documentation for more information: https://platform.openai.com/docs/api-reference/responses/create.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": null,\n    \"code\": \"unsupported_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:19:33.434637999+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T21:19:33.434759794+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T21:19:33.434800298+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T21:19:33.434859676+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T21:19:35.012555134+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T21:19:35.012658113+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T21:19:35.168790095+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T21:19:35.168921437+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T21:19:35.168952848+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T21:19:35.169167651+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T21:19:35.170027995+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T21:19:35.170105413+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T21:19:35.170145144+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T21:19:42.868576522+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:19:44.845269768+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:19:45.115388936+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T21:19:51.479699139+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:19:51.48238365+02:00","level":"INFO","msg":"Starting AI parsing","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:19:51.482734286+02:00","level":"INFO","msg":"Built multi-item prompt for AI","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","prompt_length":8497,"prompt_preview":"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\n\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\n[\n  {\n    \"standardized_name\": \"standardized item name in the same language\",\n    \"category\": \"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\",\n    \"subcategory\": \"specific typ..."}
{"time":"2025-09-06T21:19:51.482992115+02:00","level":"INFO","msg":"[MULTI] Sending request to OpenAI Responses API","env":"local","url":"https://api.openai.com/v1/responses","model":"gpt-5-nano","api_key_prefix":"sk-proj-Zq...","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","request_body":"{\"model\":\"gpt-5-nano\",\"input\":\"Input: Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\nLanguage: en\",\"instructions\":\"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and extract multiple items if present. Respond ONLY with valid JSON array.\\n\\nYou are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\\n[\\n  {\\n    \\\"standardized_name\\\": \\\"standardized item name in the same language\\\",\\n    \\\"category\\\": \\\"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\\\",\\n    \\\"subcategory\\\": \\\"specific type (e.g., milk, chicken, carrots)\\\",\\n    \\\"quantity_value\\\": 2.5,\\n    \\\"quantity_unit\\\": \\\"unit (kg, L, pieces, etc.)\\\",\\n    \\\"confidence_score\\\": 0.95\\n  }\\n]\\n\\nRules:\\n- Intelligently separate items even without commas (e.g., \\\"milk bread eggs\\\" → 3 items)\\n- Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities\\n- CRITICAL: Always preserve the original language in standardized_name (молоко stays молоко, NOT milk)\\n- Categories and subcategories should be in English\\n- CRITICAL: Extract quantities correctly, including decimals with comma separators\\n- \\\"0,5 кг\\\" means 0.5 kilograms - DO NOT split this into \\\"0\\\" and \\\"5 кг\\\"\\n- \\\"1,5 л\\\" means 1.5 liters - keep as one item with quantity_value: 1.5\\n- Convert European decimal commas to dots: \\\"0,5\\\" → quantity_value: 0.5\\n- Separate complex sentences into individual items (e.g., \\\"мочалки для посуды. овощи- 3 огурца\\\" → 2 items)\\n- Handle variations like \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\" (fix typos but keep language)\\n- NEVER translate item names to other languages - keep them exactly as provided\\n- If no quantity is found, omit quantity_value and set quantity_unit to \\\"pieces\\\"\\n- confidence_score should be between 0.0 and 1.0\\n\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\n## Standard Categories and Subcategories:\\n\\n### dairy\\n- milk, yogurt, cheese, butter, cream, cottage_cheese, sour_cream\\n\\n### meat\\n- chicken, beef, pork, lamb, turkey, fish, seafood, sausage, ham\\n\\n### produce  \\n- fruits: apple, banana, orange, berries, grapes\\n- vegetables: carrot, onion, potato, tomato, lettuce, cucumber\\n\\n### pantry\\n- rice, pasta, flour, sugar, salt, oil, vinegar, spices, canned_goods\\n\\n### beverages\\n- water, juice, soda, coffee, tea, alcohol, milk_alternatives\\n\\n### bakery\\n- bread, rolls, bagels, pastry, cake, cookies\\n\\n### household\\n- cleaning_supplies, paper_products, personal_care, laundry\\n\\n### frozen\\n- frozen_vegetables, frozen_meals, ice_cream, frozen_meat\\n\\n### snacks\\n- chips, crackers, nuts, candy, chocolate\\n\\n## Quantity Units:\\nCommon units to recognize and standardize:\\n- Weight: kg, g, lb, oz\\n- Volume: L, ml, cup, pint, gallon\\n- Count: pieces, pack, box, bottle, can, bag\\n- Length: cm, inch (for items like aluminum foil)\\n\\n## English Language Examples:\\n\\n### Basic Items:\\n- \\\"milk\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"bread\\\" → {\\\"standardized_name\\\": \\\"bread\\\", \\\"category\\\": \\\"bakery\\\", \\\"subcategory\\\": \\\"bread\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n\\n### With Quantities:\\n- \\\"milk 2L\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"L\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"chicken 1kg\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"kg\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples (2 bags)\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"bags\\\", \\\"confidence_score\\\": 0.95}\\n\\n### Common Typos/Variations:\\n- \\\"coffe\\\" → {\\\"standardized_name\\\": \\\"coffee\\\", \\\"category\\\": \\\"beverages\\\", \\\"subcategory\\\": \\\"coffee\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"tomatoe\\\" → {\\\"standardized_name\\\": \\\"tomato\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"chiken\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.85}\\n\\n### Ambiguous Cases:\\n- \\\"raw\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.7}\\n- \\\"green\\\" → {\\\"standardized_name\\\": \\\"lettuce\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.6}\\n\\n## Ambiguous Items and Context-Based Mappings:\\n\\n### High Ambiguity Cases (confidence \\u003c 0.8):\\nThese items require contextual inference and should have lower confidence scores:\\n\\n- \\\"raw\\\" → likely \\\"milk\\\" (dairy context)\\n- \\\"green\\\" → likely \\\"lettuce\\\" or \\\"herbs\\\" (produce context)  \\n- \\\"white\\\" → could be \\\"rice\\\", \\\"bread\\\", \\\"milk\\\" (context dependent)\\n- \\\"red\\\" → likely \\\"tomatoes\\\", \\\"apples\\\", or \\\"meat\\\" (context dependent)\\n- \\\"big\\\" → needs additional context\\n- \\\"small\\\" → needs additional context\\n- \\\"fresh\\\" → modifier, extract the actual item\\n\\n### Common Abbreviations:\\n- \\\"choc\\\" → \\\"chocolate\\\"\\n- \\\"veggies\\\" → \\\"vegetables\\\" \\n- \\\"fruits\\\" → \\\"mixed fruits\\\"\\n- \\\"meat\\\" → \\\"beef\\\" (default assumption)\\n- \\\"fish\\\" → \\\"fish\\\" (seafood category)\\n\\n### Context Clues:\\nWhen items are ambiguous, use these strategies:\\n1. Look for quantity units (2L suggests liquid like milk)\\n2. Consider common shopping patterns\\n3. Use lower confidence scores (0.6-0.8) for ambiguous items\\n4. Default to most common interpretation\\n\\n### Multi-word Items:\\n- \\\"olive oil\\\" → {\\\"standardized_name\\\": \\\"olive oil\\\", \\\"category\\\": \\\"pantry\\\", \\\"subcategory\\\": \\\"oil\\\"}\\n- \\\"ice cream\\\" → {\\\"standardized_name\\\": \\\"ice cream\\\", \\\"category\\\": \\\"frozen\\\", \\\"subcategory\\\": \\\"dessert\\\"}\\n- \\\"toilet paper\\\" → {\\\"standardized_name\\\": \\\"toilet paper\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"paper_products\\\"}\\n- \\\"washing powder\\\" → {\\\"standardized_name\\\": \\\"washing powder\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"laundry\\\"}\\n\\n## Multi-Item Parsing Task:\\nInput: \\\"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\\"\\nLanguage: en\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array. Consider:\\n1. Split items even without clear separators (e.g., \\\"milk bread eggs\\\" → 3 items)\\n2. Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities  \\n3. Preserve original language in standardized_name\\n4. Categories and subcategories should be in English\\n5. Extract individual quantities correctly per item\\n6. Handle variations and typos (e.g., \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\")\\n7. Use appropriate confidence scores based on ambiguity level\\n\\nCRITICAL DECIMAL PARSING EXAMPLES:\\n❌ WRONG: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]\\n✅ CORRECT: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\", \\\"quantity_value\\\": 0.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\n❌ WRONG: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]  \\n✅ CORRECT: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\", \\\"quantity_value\\\": 1.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\nOther correct examples:\\n- Input: \\\"молоко, сыр, багет\\\" → [{\\\"standardized_name\\\": \\\"молоко\\\"}, {\\\"standardized_name\\\": \\\"сыр\\\"}, {\\\"standardized_name\\\": \\\"багет\\\"}]\\n- Input: \\\"мочалки для посуды. овощи- 3 огурца\\\" → [{\\\"standardized_name\\\": \\\"мочалки для посуды\\\"}, {\\\"standardized_name\\\": \\\"огурцы\\\", \\\"quantity_value\\\": 3.0, \\\"quantity_unit\\\": \\\"pieces\\\"}]\\n- Input: \\\"хлеб 2 батона и молоко 1л\\\" → [{\\\"standardized_name\\\": \\\"хлеб\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"pieces\\\"}, {\\\"standardized_name\\\": \\\"молоко\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"L\\\"}]\\n\\nResponse format: JSON array of items, each with the structure specified above.\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\",\"max_tokens\":600,\"temperature\":0.1,\"store\":true,\"reasoning\":{\"effort\":\"medium\"}}"}
{"time":"2025-09-06T21:19:51.732588283+02:00","level":"INFO","msg":"[MULTI] Received response from OpenAI Responses API","env":"local","status_code":400,"response_body":"{\n  \"error\": {\n    \"message\": \"Unknown parameter: 'max_tokens'.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": \"max_tokens\",\n    \"code\": \"unknown_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:19:51.732672098+02:00","level":"ERROR","msg":"[MULTI] OpenAI API error","env":"local","status_code":400,"response":"{\n  \"error\": {\n    \"message\": \"Unknown parameter: 'max_tokens'.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": \"max_tokens\",\n    \"code\": \"unknown_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:19:51.732713969+02:00","level":"ERROR","msg":"Failed to parse items with AI","env":"local","error":"responses API error: 400 - {\n  \"error\": {\n    \"message\": \"Unknown parameter: 'max_tokens'.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": \"max_tokens\",\n    \"code\": \"unknown_parameter\"\n  }\n}","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:19:51.732814327+02:00","level":"ERROR","msg":"AI parsing failed","env":"local","component":"shopping-service","error":"failed to parse items: responses API error: 400 - {\n  \"error\": {\n    \"message\": \"Unknown parameter: 'max_tokens'.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": \"max_tokens\",\n    \"code\": \"unknown_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:19:51.732840373+02:00","level":"ERROR","msg":"Failed to add items to list with AI","env":"local","error":"failed to parse items with AI: failed to parse items: responses API error: 400 - {\n  \"error\": {\n    \"message\": \"Unknown parameter: 'max_tokens'.\",\n    \"type\": \"invalid_request_error\",\n    \"param\": \"max_tokens\",\n    \"code\": \"unknown_parameter\"\n  }\n}"}
{"time":"2025-09-06T21:25:17.615970264+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T21:25:17.61603091+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T21:25:17.616047856+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T21:25:17.616068378+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T21:25:19.539220234+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T21:25:19.539393693+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T21:25:19.688304756+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T21:25:19.68834011+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T21:25:19.688349208+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T21:25:19.688512054+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T21:25:19.688554929+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T21:25:19.688511954+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T21:25:19.688588992+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T21:25:26.664549806+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:25:27.662588461+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:25:27.798431623+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T21:25:29.114323738+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:25:29.116797592+02:00","level":"INFO","msg":"Starting AI parsing","env":"local","raw_text":"етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:25:29.1170874+02:00","level":"INFO","msg":"Built multi-item prompt for AI","env":"local","raw_text":"етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","prompt_length":8495,"prompt_preview":"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\n\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\n[\n  {\n    \"standardized_name\": \"standardized item name in the same language\",\n    \"category\": \"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\",\n    \"subcategory\": \"specific typ..."}
{"time":"2025-09-06T21:25:29.117273809+02:00","level":"INFO","msg":"[MULTI] Sending request to OpenAI Responses API","env":"local","url":"https://api.openai.com/v1/responses","model":"gpt-5-nano","api_key_prefix":"sk-proj-Zq...","raw_text":"етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","request_body":"{\"model\":\"gpt-5-nano\",\"input\":[{\"role\":\"user\",\"content\":\"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and extract multiple items if present. Respond ONLY with valid JSON array.\\n\\nYou are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\\n[\\n  {\\n    \\\"standardized_name\\\": \\\"standardized item name in the same language\\\",\\n    \\\"category\\\": \\\"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\\\",\\n    \\\"subcategory\\\": \\\"specific type (e.g., milk, chicken, carrots)\\\",\\n    \\\"quantity_value\\\": 2.5,\\n    \\\"quantity_unit\\\": \\\"unit (kg, L, pieces, etc.)\\\",\\n    \\\"confidence_score\\\": 0.95\\n  }\\n]\\n\\nRules:\\n- Intelligently separate items even without commas (e.g., \\\"milk bread eggs\\\" → 3 items)\\n- Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities\\n- CRITICAL: Always preserve the original language in standardized_name (молоко stays молоко, NOT milk)\\n- Categories and subcategories should be in English\\n- CRITICAL: Extract quantities correctly, including decimals with comma separators\\n- \\\"0,5 кг\\\" means 0.5 kilograms - DO NOT split this into \\\"0\\\" and \\\"5 кг\\\"\\n- \\\"1,5 л\\\" means 1.5 liters - keep as one item with quantity_value: 1.5\\n- Convert European decimal commas to dots: \\\"0,5\\\" → quantity_value: 0.5\\n- Separate complex sentences into individual items (e.g., \\\"мочалки для посуды. овощи- 3 огурца\\\" → 2 items)\\n- Handle variations like \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\" (fix typos but keep language)\\n- NEVER translate item names to other languages - keep them exactly as provided\\n- If no quantity is found, omit quantity_value and set quantity_unit to \\\"pieces\\\"\\n- confidence_score should be between 0.0 and 1.0\\n\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\n## Standard Categories and Subcategories:\\n\\n### dairy\\n- milk, yogurt, cheese, butter, cream, cottage_cheese, sour_cream\\n\\n### meat\\n- chicken, beef, pork, lamb, turkey, fish, seafood, sausage, ham\\n\\n### produce  \\n- fruits: apple, banana, orange, berries, grapes\\n- vegetables: carrot, onion, potato, tomato, lettuce, cucumber\\n\\n### pantry\\n- rice, pasta, flour, sugar, salt, oil, vinegar, spices, canned_goods\\n\\n### beverages\\n- water, juice, soda, coffee, tea, alcohol, milk_alternatives\\n\\n### bakery\\n- bread, rolls, bagels, pastry, cake, cookies\\n\\n### household\\n- cleaning_supplies, paper_products, personal_care, laundry\\n\\n### frozen\\n- frozen_vegetables, frozen_meals, ice_cream, frozen_meat\\n\\n### snacks\\n- chips, crackers, nuts, candy, chocolate\\n\\n## Quantity Units:\\nCommon units to recognize and standardize:\\n- Weight: kg, g, lb, oz\\n- Volume: L, ml, cup, pint, gallon\\n- Count: pieces, pack, box, bottle, can, bag\\n- Length: cm, inch (for items like aluminum foil)\\n\\n## English Language Examples:\\n\\n### Basic Items:\\n- \\\"milk\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"bread\\\" → {\\\"standardized_name\\\": \\\"bread\\\", \\\"category\\\": \\\"bakery\\\", \\\"subcategory\\\": \\\"bread\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n\\n### With Quantities:\\n- \\\"milk 2L\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"L\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"chicken 1kg\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"kg\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples (2 bags)\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"bags\\\", \\\"confidence_score\\\": 0.95}\\n\\n### Common Typos/Variations:\\n- \\\"coffe\\\" → {\\\"standardized_name\\\": \\\"coffee\\\", \\\"category\\\": \\\"beverages\\\", \\\"subcategory\\\": \\\"coffee\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"tomatoe\\\" → {\\\"standardized_name\\\": \\\"tomato\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"chiken\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.85}\\n\\n### Ambiguous Cases:\\n- \\\"raw\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.7}\\n- \\\"green\\\" → {\\\"standardized_name\\\": \\\"lettuce\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.6}\\n\\n## Ambiguous Items and Context-Based Mappings:\\n\\n### High Ambiguity Cases (confidence \\u003c 0.8):\\nThese items require contextual inference and should have lower confidence scores:\\n\\n- \\\"raw\\\" → likely \\\"milk\\\" (dairy context)\\n- \\\"green\\\" → likely \\\"lettuce\\\" or \\\"herbs\\\" (produce context)  \\n- \\\"white\\\" → could be \\\"rice\\\", \\\"bread\\\", \\\"milk\\\" (context dependent)\\n- \\\"red\\\" → likely \\\"tomatoes\\\", \\\"apples\\\", or \\\"meat\\\" (context dependent)\\n- \\\"big\\\" → needs additional context\\n- \\\"small\\\" → needs additional context\\n- \\\"fresh\\\" → modifier, extract the actual item\\n\\n### Common Abbreviations:\\n- \\\"choc\\\" → \\\"chocolate\\\"\\n- \\\"veggies\\\" → \\\"vegetables\\\" \\n- \\\"fruits\\\" → \\\"mixed fruits\\\"\\n- \\\"meat\\\" → \\\"beef\\\" (default assumption)\\n- \\\"fish\\\" → \\\"fish\\\" (seafood category)\\n\\n### Context Clues:\\nWhen items are ambiguous, use these strategies:\\n1. Look for quantity units (2L suggests liquid like milk)\\n2. Consider common shopping patterns\\n3. Use lower confidence scores (0.6-0.8) for ambiguous items\\n4. Default to most common interpretation\\n\\n### Multi-word Items:\\n- \\\"olive oil\\\" → {\\\"standardized_name\\\": \\\"olive oil\\\", \\\"category\\\": \\\"pantry\\\", \\\"subcategory\\\": \\\"oil\\\"}\\n- \\\"ice cream\\\" → {\\\"standardized_name\\\": \\\"ice cream\\\", \\\"category\\\": \\\"frozen\\\", \\\"subcategory\\\": \\\"dessert\\\"}\\n- \\\"toilet paper\\\" → {\\\"standardized_name\\\": \\\"toilet paper\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"paper_products\\\"}\\n- \\\"washing powder\\\" → {\\\"standardized_name\\\": \\\"washing powder\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"laundry\\\"}\\n\\n## Multi-Item Parsing Task:\\nInput: \\\"етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\\"\\nLanguage: en\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array. Consider:\\n1. Split items even without clear separators (e.g., \\\"milk bread eggs\\\" → 3 items)\\n2. Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities  \\n3. Preserve original language in standardized_name\\n4. Categories and subcategories should be in English\\n5. Extract individual quantities correctly per item\\n6. Handle variations and typos (e.g., \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\")\\n7. Use appropriate confidence scores based on ambiguity level\\n\\nCRITICAL DECIMAL PARSING EXAMPLES:\\n❌ WRONG: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]\\n✅ CORRECT: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\", \\\"quantity_value\\\": 0.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\n❌ WRONG: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]  \\n✅ CORRECT: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\", \\\"quantity_value\\\": 1.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\nOther correct examples:\\n- Input: \\\"молоко, сыр, багет\\\" → [{\\\"standardized_name\\\": \\\"молоко\\\"}, {\\\"standardized_name\\\": \\\"сыр\\\"}, {\\\"standardized_name\\\": \\\"багет\\\"}]\\n- Input: \\\"мочалки для посуды. овощи- 3 огурца\\\" → [{\\\"standardized_name\\\": \\\"мочалки для посуды\\\"}, {\\\"standardized_name\\\": \\\"огурцы\\\", \\\"quantity_value\\\": 3.0, \\\"quantity_unit\\\": \\\"pieces\\\"}]\\n- Input: \\\"хлеб 2 батона и молоко 1л\\\" → [{\\\"standardized_name\\\": \\\"хлеб\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"pieces\\\"}, {\\\"standardized_name\\\": \\\"молоко\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"L\\\"}]\\n\\nResponse format: JSON array of items, each with the structure specified above.\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\nInput: етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\nLanguage: en\"}],\"store\":true,\"reasoning\":{\"effort\":\"medium\"}}"}
{"time":"2025-09-06T21:25:35.215566917+02:00","level":"INFO","msg":"[MULTI] Received response from OpenAI Responses API","env":"local","status_code":429,"response_body":"{\n  \"error\": {\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\",\n    \"type\": \"insufficient_quota\",\n    \"param\": null,\n    \"code\": \"insufficient_quota\"\n  }\n}"}
{"time":"2025-09-06T21:25:35.215658128+02:00","level":"ERROR","msg":"[MULTI] OpenAI API error","env":"local","status_code":429,"response":"{\n  \"error\": {\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\",\n    \"type\": \"insufficient_quota\",\n    \"param\": null,\n    \"code\": \"insufficient_quota\"\n  }\n}"}
{"time":"2025-09-06T21:25:35.215708395+02:00","level":"ERROR","msg":"Failed to parse items with AI","env":"local","error":"responses API error: 429 - {\n  \"error\": {\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\",\n    \"type\": \"insufficient_quota\",\n    \"param\": null,\n    \"code\": \"insufficient_quota\"\n  }\n}","raw_text":"етка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:25:35.215801986+02:00","level":"ERROR","msg":"AI parsing failed","env":"local","component":"shopping-service","error":"failed to parse items: responses API error: 429 - {\n  \"error\": {\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\",\n    \"type\": \"insufficient_quota\",\n    \"param\": null,\n    \"code\": \"insufficient_quota\"\n  }\n}"}
{"time":"2025-09-06T21:25:35.215826937+02:00","level":"ERROR","msg":"Failed to add items to list with AI","env":"local","error":"failed to parse items with AI: failed to parse items: responses API error: 429 - {\n  \"error\": {\n    \"message\": \"You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\",\n    \"type\": \"insufficient_quota\",\n    \"param\": null,\n    \"code\": \"insufficient_quota\"\n  }\n}"}
{"time":"2025-09-06T21:27:05.473743738+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:27:06.884810288+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:27:07.010740071+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T21:27:08.666931417+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:27:08.667887331+02:00","level":"INFO","msg":"Starting AI parsing","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:27:08.668017147+02:00","level":"INFO","msg":"Built multi-item prompt for AI","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","prompt_length":8497,"prompt_preview":"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\n\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\n[\n  {\n    \"standardized_name\": \"standardized item name in the same language\",\n    \"category\": \"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\",\n    \"subcategory\": \"specific typ..."}
{"time":"2025-09-06T21:27:08.66809203+02:00","level":"INFO","msg":"[MULTI] Sending request to OpenAI Responses API","env":"local","url":"https://api.openai.com/v1/responses","model":"gpt-5-nano","api_key_prefix":"sk-proj-Zq...","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","request_body":"{\"model\":\"gpt-5-nano\",\"input\":[{\"role\":\"user\",\"content\":\"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and extract multiple items if present. Respond ONLY with valid JSON array.\\n\\nYou are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\\n[\\n  {\\n    \\\"standardized_name\\\": \\\"standardized item name in the same language\\\",\\n    \\\"category\\\": \\\"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\\\",\\n    \\\"subcategory\\\": \\\"specific type (e.g., milk, chicken, carrots)\\\",\\n    \\\"quantity_value\\\": 2.5,\\n    \\\"quantity_unit\\\": \\\"unit (kg, L, pieces, etc.)\\\",\\n    \\\"confidence_score\\\": 0.95\\n  }\\n]\\n\\nRules:\\n- Intelligently separate items even without commas (e.g., \\\"milk bread eggs\\\" → 3 items)\\n- Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities\\n- CRITICAL: Always preserve the original language in standardized_name (молоко stays молоко, NOT milk)\\n- Categories and subcategories should be in English\\n- CRITICAL: Extract quantities correctly, including decimals with comma separators\\n- \\\"0,5 кг\\\" means 0.5 kilograms - DO NOT split this into \\\"0\\\" and \\\"5 кг\\\"\\n- \\\"1,5 л\\\" means 1.5 liters - keep as one item with quantity_value: 1.5\\n- Convert European decimal commas to dots: \\\"0,5\\\" → quantity_value: 0.5\\n- Separate complex sentences into individual items (e.g., \\\"мочалки для посуды. овощи- 3 огурца\\\" → 2 items)\\n- Handle variations like \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\" (fix typos but keep language)\\n- NEVER translate item names to other languages - keep them exactly as provided\\n- If no quantity is found, omit quantity_value and set quantity_unit to \\\"pieces\\\"\\n- confidence_score should be between 0.0 and 1.0\\n\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\n## Standard Categories and Subcategories:\\n\\n### dairy\\n- milk, yogurt, cheese, butter, cream, cottage_cheese, sour_cream\\n\\n### meat\\n- chicken, beef, pork, lamb, turkey, fish, seafood, sausage, ham\\n\\n### produce  \\n- fruits: apple, banana, orange, berries, grapes\\n- vegetables: carrot, onion, potato, tomato, lettuce, cucumber\\n\\n### pantry\\n- rice, pasta, flour, sugar, salt, oil, vinegar, spices, canned_goods\\n\\n### beverages\\n- water, juice, soda, coffee, tea, alcohol, milk_alternatives\\n\\n### bakery\\n- bread, rolls, bagels, pastry, cake, cookies\\n\\n### household\\n- cleaning_supplies, paper_products, personal_care, laundry\\n\\n### frozen\\n- frozen_vegetables, frozen_meals, ice_cream, frozen_meat\\n\\n### snacks\\n- chips, crackers, nuts, candy, chocolate\\n\\n## Quantity Units:\\nCommon units to recognize and standardize:\\n- Weight: kg, g, lb, oz\\n- Volume: L, ml, cup, pint, gallon\\n- Count: pieces, pack, box, bottle, can, bag\\n- Length: cm, inch (for items like aluminum foil)\\n\\n## English Language Examples:\\n\\n### Basic Items:\\n- \\\"milk\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"bread\\\" → {\\\"standardized_name\\\": \\\"bread\\\", \\\"category\\\": \\\"bakery\\\", \\\"subcategory\\\": \\\"bread\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n\\n### With Quantities:\\n- \\\"milk 2L\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"L\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"chicken 1kg\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"kg\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples (2 bags)\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"bags\\\", \\\"confidence_score\\\": 0.95}\\n\\n### Common Typos/Variations:\\n- \\\"coffe\\\" → {\\\"standardized_name\\\": \\\"coffee\\\", \\\"category\\\": \\\"beverages\\\", \\\"subcategory\\\": \\\"coffee\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"tomatoe\\\" → {\\\"standardized_name\\\": \\\"tomato\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"chiken\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.85}\\n\\n### Ambiguous Cases:\\n- \\\"raw\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.7}\\n- \\\"green\\\" → {\\\"standardized_name\\\": \\\"lettuce\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.6}\\n\\n## Ambiguous Items and Context-Based Mappings:\\n\\n### High Ambiguity Cases (confidence \\u003c 0.8):\\nThese items require contextual inference and should have lower confidence scores:\\n\\n- \\\"raw\\\" → likely \\\"milk\\\" (dairy context)\\n- \\\"green\\\" → likely \\\"lettuce\\\" or \\\"herbs\\\" (produce context)  \\n- \\\"white\\\" → could be \\\"rice\\\", \\\"bread\\\", \\\"milk\\\" (context dependent)\\n- \\\"red\\\" → likely \\\"tomatoes\\\", \\\"apples\\\", or \\\"meat\\\" (context dependent)\\n- \\\"big\\\" → needs additional context\\n- \\\"small\\\" → needs additional context\\n- \\\"fresh\\\" → modifier, extract the actual item\\n\\n### Common Abbreviations:\\n- \\\"choc\\\" → \\\"chocolate\\\"\\n- \\\"veggies\\\" → \\\"vegetables\\\" \\n- \\\"fruits\\\" → \\\"mixed fruits\\\"\\n- \\\"meat\\\" → \\\"beef\\\" (default assumption)\\n- \\\"fish\\\" → \\\"fish\\\" (seafood category)\\n\\n### Context Clues:\\nWhen items are ambiguous, use these strategies:\\n1. Look for quantity units (2L suggests liquid like milk)\\n2. Consider common shopping patterns\\n3. Use lower confidence scores (0.6-0.8) for ambiguous items\\n4. Default to most common interpretation\\n\\n### Multi-word Items:\\n- \\\"olive oil\\\" → {\\\"standardized_name\\\": \\\"olive oil\\\", \\\"category\\\": \\\"pantry\\\", \\\"subcategory\\\": \\\"oil\\\"}\\n- \\\"ice cream\\\" → {\\\"standardized_name\\\": \\\"ice cream\\\", \\\"category\\\": \\\"frozen\\\", \\\"subcategory\\\": \\\"dessert\\\"}\\n- \\\"toilet paper\\\" → {\\\"standardized_name\\\": \\\"toilet paper\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"paper_products\\\"}\\n- \\\"washing powder\\\" → {\\\"standardized_name\\\": \\\"washing powder\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"laundry\\\"}\\n\\n## Multi-Item Parsing Task:\\nInput: \\\"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\\"\\nLanguage: en\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array. Consider:\\n1. Split items even without clear separators (e.g., \\\"milk bread eggs\\\" → 3 items)\\n2. Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities  \\n3. Preserve original language in standardized_name\\n4. Categories and subcategories should be in English\\n5. Extract individual quantities correctly per item\\n6. Handle variations and typos (e.g., \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\")\\n7. Use appropriate confidence scores based on ambiguity level\\n\\nCRITICAL DECIMAL PARSING EXAMPLES:\\n❌ WRONG: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]\\n✅ CORRECT: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\", \\\"quantity_value\\\": 0.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\n❌ WRONG: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]  \\n✅ CORRECT: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\", \\\"quantity_value\\\": 1.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\nOther correct examples:\\n- Input: \\\"молоко, сыр, багет\\\" → [{\\\"standardized_name\\\": \\\"молоко\\\"}, {\\\"standardized_name\\\": \\\"сыр\\\"}, {\\\"standardized_name\\\": \\\"багет\\\"}]\\n- Input: \\\"мочалки для посуды. овощи- 3 огурца\\\" → [{\\\"standardized_name\\\": \\\"мочалки для посуды\\\"}, {\\\"standardized_name\\\": \\\"огурцы\\\", \\\"quantity_value\\\": 3.0, \\\"quantity_unit\\\": \\\"pieces\\\"}]\\n- Input: \\\"хлеб 2 батона и молоко 1л\\\" → [{\\\"standardized_name\\\": \\\"хлеб\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"pieces\\\"}, {\\\"standardized_name\\\": \\\"молоко\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"L\\\"}]\\n\\nResponse format: JSON array of items, each with the structure specified above.\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\nInput: Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\nLanguage: en\"}],\"store\":true,\"reasoning\":{\"effort\":\"medium\"}}"}
{"time":"2025-09-06T21:27:49.785376554+02:00","level":"INFO","msg":"[MULTI] Received response from OpenAI Responses API","env":"local","status_code":200,"response_body":"{\n  \"id\": \"resp_68bc8b0d0ddc8195a728d3febb3ee89c0e435ff327deead8\",\n  \"object\": \"response\",\n  \"created_at\": 1757186829,\n  \"status\": \"completed\",\n  \"background\": false,\n  \"error\": null,\n  \"incomplete_details\": null,\n  \"instructions\": null,\n  \"max_output_tokens\": null,\n  \"max_tool_calls\": null,\n  \"model\": \"gpt-5-nano-2025-08-07\",\n  \"output\": [\n    {\n      \"id\": \"rs_68bc8b0e1258819585ba21adb02882970e435ff327deead8\",\n      \"type\": \"reasoning\",\n      \"summary\": []\n    },\n    {\n      \"id\": \"msg_68bc8b312a4c81958a3e4d368eb814fb0e435ff327deead8\",\n      \"type\": \"message\",\n      \"status\": \"completed\",\n      \"content\": [\n        {\n          \"type\": \"output_text\",\n          \"annotations\": [],\n          \"logprobs\": [],\n          \"text\": \"[\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0429\\u0435\\u0442\\u043a\\u0430 \\u043d\\u0430 \\u0448\\u0432\\u0430\\u0431\\u0440\\u0443\\\",\\n    \\\"category\\\": \\\"household\\\",\\n    \\\"subcategory\\\": \\\"cleaning_supplies\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0442\\u0443\\u0430\\u043b\\u0435\\u0442\\u043d\\u0430\\u044f \\u0431\\u0443\\u043c\\u0430\\u0433\\u0430\\\",\\n    \\\"category\\\": \\\"household\\\",\\n    \\\"subcategory\\\": \\\"paper_products\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043c\\u043e\\u0447\\u0430\\u043b\\u043a\\u0438 \\u0434\\u043b\\u044f \\u043f\\u043e\\u0441\\u0443\\u0434\\u044b\\\",\\n    \\\"category\\\": \\\"household\\\",\\n    \\\"subcategory\\\": \\\"cleaning_supplies\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043e\\u0433\\u0443\\u0440\\u0446\\u044b\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"cucumber\\\",\\n    \\\"quantity_value\\\": 3.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043a\\u0443\\u043a\\u0443\\u0440\\u0443\\u0437\\u044b\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"corn\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pack\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043b\\u0438\\u0441\\u0442 \\u0441\\u0430\\u043b\\u0430\\u0442\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"lettuce\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043c\\u043e\\u0440\\u043a\\u043e\\u0432\\u043a\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"carrot\\\",\\n    \\\"quantity_value\\\": 0.5,\\n    \\\"quantity_unit\\\": \\\"kg\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0433\\u043e\\u043b\\u0443\\u0431\\u0438\\u043a\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"blueberries\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pack\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043f\\u043e\\u043b \\u043a\\u0430\\u043f\\u0443\\u0441\\u0442\\u044b\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"cabbage\\\",\\n    \\\"quantity_value\\\": 0.5,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0441\\u0430\\u043b\\u0430\\u0442 \\u0446\\u0435\\u0437\\u0430\\u0440\\u044c\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"lettuce\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0441\\u0430\\u043b\\u0430\\u0442 \\u0441 \\u0442\\u0443\\u043d\\u0446\\u043e\\u043c\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"salad\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0445\\u043b\\u0435\\u0431 \\u0446\\u0435\\u043b\\u044c\\u043d\\u043e\\u0437\\u0435\\u0440\\u043d\\u043e\\u0432\\u043e\\u0439\\\",\\n    \\\"category\\\": \\\"bakery\\\",\\n    \\\"subcategory\\\": \\\"bread\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0440\\u044b\\u0431\\u0430 \\u043a\\u0440\\u0430\\u0441\\u043d\\u0430\\u044f \\u0444\\u0438\\u043b\\u0435\\\",\\n    \\\"category\\\": \\\"meat\\\",\\n    \\\"subcategory\\\": \\\"fish\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043a\\u0440\\u043e\\u043b\\u0438\\u043a\\\",\\n    \\\"category\\\": \\\"meat\\\",\\n    \\\"subcategory\\\": \\\"rabbit\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0444\\u0438\\u043b\\u0435 \\u043a\\u0443\\u0440\\u0438\\u0446\\u044b\\\",\\n    \\\"category\\\": \\\"meat\\\",\\n    \\\"subcategory\\\": \\\"chicken\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pack\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0441\\u043b\\u0438\\u0432\\u043a\\u0438\\\",\\n    \\\"category\\\": \\\"dairy\\\",\\n    \\\"subcategory\\\": \\\"cream\\\",\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  }\\n]\"\n        }\n      ],\n      \"role\": \"assistant\"\n    }\n  ],\n  \"parallel_tool_calls\": true,\n  \"previous_response_id\": null,\n  \"prompt_cache_key\": null,\n  \"reasoning\": {\n    \"effort\": \"medium\",\n    \"summary\": null\n  },\n  \"safety_identifier\": null,\n  \"service_tier\": \"default\",\n  \"store\": true,\n  \"temperature\": 1.0,\n  \"text\": {\n    \"format\": {\n      \"type\": \"text\"\n    },\n    \"verbosity\": \"medium\"\n  },\n  \"tool_choice\": \"auto\",\n  \"tools\": [],\n  \"top_logprobs\": 0,\n  \"top_p\": 1.0,\n  \"truncation\": \"disabled\",\n  \"usage\": {\n    \"input_tokens\": 2428,\n    \"input_tokens_details\": {\n      \"cached_tokens\": 0\n    },\n    \"output_tokens\": 8230,\n    \"output_tokens_details\": {\n      \"reasoning_tokens\": 7360\n    },\n    \"total_tokens\": 10658\n  },\n  \"user\": null,\n  \"metadata\": {}\n}"}
{"time":"2025-09-06T21:27:49.786333971+02:00","level":"INFO","msg":"Successfully parsed multiple items with Responses API","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","model":"gpt-5-nano","items_count":16,"tokens_used":10658,"reasoning_effort":"medium"}
{"time":"2025-09-06T21:27:49.786414948+02:00","level":"INFO","msg":"AI parsing completed","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","results_count":16}
{"time":"2025-09-06T21:27:49.786462534+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":1,"standardized_name":"Щетка на швабру","category":"household","subcategory":"cleaning_supplies","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786564081+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":2,"standardized_name":"туалетная бумага","category":"household","subcategory":"paper_products","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786602575+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":3,"standardized_name":"мочалки для посуды","category":"household","subcategory":"cleaning_supplies","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786635151+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":4,"standardized_name":"огурцы","category":"produce","subcategory":"cucumber","quantity_value":3,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.78666994+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":5,"standardized_name":"кукурузы","category":"produce","subcategory":"corn","quantity_value":1,"quantity_unit":"pack","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786701766+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":6,"standardized_name":"лист салата","category":"produce","subcategory":"lettuce","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.78673294+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":7,"standardized_name":"морковка","category":"produce","subcategory":"carrot","quantity_value":0.5,"quantity_unit":"kg","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786765599+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":8,"standardized_name":"голубика","category":"produce","subcategory":"blueberries","quantity_value":1,"quantity_unit":"pack","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786798091+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":9,"standardized_name":"пол капусты","category":"produce","subcategory":"cabbage","quantity_value":0.5,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786830378+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":10,"standardized_name":"салат цезарь","category":"produce","subcategory":"lettuce","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786861896+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":11,"standardized_name":"салат с тунцом","category":"produce","subcategory":"salad","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786894253+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":12,"standardized_name":"хлеб цельнозерновой","category":"bakery","subcategory":"bread","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786925896+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":13,"standardized_name":"рыба красная филе","category":"meat","subcategory":"fish","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786956727+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":14,"standardized_name":"кролик","category":"meat","subcategory":"rabbit","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.786987378+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":15,"standardized_name":"филе курицы","category":"meat","subcategory":"chicken","quantity_value":1,"quantity_unit":"pack","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.787020107+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":16,"standardized_name":"сливки","category":"dairy","subcategory":"cream","quantity_value":null,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:27:49.796434161+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"Щетка на швабру","parsed":"Щетка на швабру","category":"household","confidence":0.95,"item_index":1,"total_items":16}
{"time":"2025-09-06T21:27:49.799166902+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"туалетная бумага","parsed":"туалетная бумага","category":"household","confidence":0.95,"item_index":2,"total_items":16}
{"time":"2025-09-06T21:27:49.801567701+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"мочалки для посуды","parsed":"мочалки для посуды","category":"household","confidence":0.95,"item_index":3,"total_items":16}
{"time":"2025-09-06T21:27:49.803501972+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"огурцы","parsed":"огурцы","category":"produce","confidence":0.95,"item_index":4,"total_items":16}
{"time":"2025-09-06T21:27:49.805349214+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кукурузы","parsed":"кукурузы","category":"produce","confidence":0.95,"item_index":5,"total_items":16}
{"time":"2025-09-06T21:27:49.807210672+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"лист салата","parsed":"лист салата","category":"produce","confidence":0.95,"item_index":6,"total_items":16}
{"time":"2025-09-06T21:27:49.808858021+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"морковка","parsed":"морковка","category":"produce","confidence":0.95,"item_index":7,"total_items":16}
{"time":"2025-09-06T21:27:49.810543079+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"голубика","parsed":"голубика","category":"produce","confidence":0.95,"item_index":8,"total_items":16}
{"time":"2025-09-06T21:27:49.812201643+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"пол капусты","parsed":"пол капусты","category":"produce","confidence":0.95,"item_index":9,"total_items":16}
{"time":"2025-09-06T21:27:49.813944011+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"салат цезарь","parsed":"салат цезарь","category":"produce","confidence":0.95,"item_index":10,"total_items":16}
{"time":"2025-09-06T21:27:49.815582184+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"салат с тунцом","parsed":"салат с тунцом","category":"produce","confidence":0.95,"item_index":11,"total_items":16}
{"time":"2025-09-06T21:27:49.817223043+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"хлеб цельнозерновой","parsed":"хлеб цельнозерновой","category":"bakery","confidence":0.95,"item_index":12,"total_items":16}
{"time":"2025-09-06T21:27:49.818894017+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"рыба красная филе","parsed":"рыба красная филе","category":"meat","confidence":0.95,"item_index":13,"total_items":16}
{"time":"2025-09-06T21:27:49.820596901+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кролик","parsed":"кролик","category":"meat","confidence":0.95,"item_index":14,"total_items":16}
{"time":"2025-09-06T21:27:49.822211006+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"филе курицы","parsed":"филе курицы","category":"meat","confidence":0.95,"item_index":15,"total_items":16}
{"time":"2025-09-06T21:27:49.823770944+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"сливки","parsed":"сливки","category":"dairy","confidence":0.95,"item_index":16,"total_items":16}
{"time":"2025-09-06T21:27:49.82378378+02:00","level":"INFO","msg":"Successfully parsed and stored items with AI","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","total_parsed":16,"successfully_stored":16}
{"time":"2025-09-06T21:27:49.82470797+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"Щетка на швабру","parsed":"Щетка на швабру","category":"household","confidence":0.95}
{"time":"2025-09-06T21:27:49.825361029+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"туалетная бумага","parsed":"туалетная бумага","category":"household","confidence":0.95}
{"time":"2025-09-06T21:27:49.826023522+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"мочалки для посуды","parsed":"мочалки для посуды","category":"household","confidence":0.95}
{"time":"2025-09-06T21:27:49.82669512+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"огурцы","parsed":"огурцы","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.827450399+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кукурузы","parsed":"кукурузы","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.828226689+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"лист салата","parsed":"лист салата","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.828934149+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"морковка","parsed":"морковка","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.829607419+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"голубика","parsed":"голубика","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.830266167+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"пол капусты","parsed":"пол капусты","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.831045457+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"салат цезарь","parsed":"салат цезарь","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.83174565+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"салат с тунцом","parsed":"салат с тунцом","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:27:49.8324898+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"хлеб цельнозерновой","parsed":"хлеб цельнозерновой","category":"bakery","confidence":0.95}
{"time":"2025-09-06T21:27:49.833307304+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"рыба красная филе","parsed":"рыба красная филе","category":"meat","confidence":0.95}
{"time":"2025-09-06T21:27:49.834107153+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кролик","parsed":"кролик","category":"meat","confidence":0.95}
{"time":"2025-09-06T21:27:49.834903562+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"филе курицы","parsed":"филе курицы","category":"meat","confidence":0.95}
{"time":"2025-09-06T21:27:49.835706542+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"сливки","parsed":"сливки","category":"dairy","confidence":0.95}
{"time":"2025-09-06T21:27:49.835753652+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T21:27:49.927526823+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:49.947658387+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"морковка","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:49.977032567+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"рыба красная филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:49.998225104+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"филе курицы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.021851812+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"салат с тунцом","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.052049419+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"пол капусты","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.07615033+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"Щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.097829717+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"голубика","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.122171198+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"хлеб цельнозерновой","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.15219649+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"мочалки для посуды","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.179657668+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"сливки","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.200040561+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кролик","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.220385007+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"огурцы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.244778811+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"лист салата","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.274997957+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кукурузы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:27:50.293132887+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"салат цезарь","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:28:20.396723726+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:34:24.823593857+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T21:34:24.823753089+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T21:34:24.823801894+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T21:34:24.823886566+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T21:34:32.494809135+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T21:34:32.494918536+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T21:34:32.641511441+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T21:34:32.641600403+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T21:34:32.641624328+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T21:34:32.641888661+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T21:34:32.642488803+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T21:34:32.642643332+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T21:34:32.642694007+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T21:34:45.374840659+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:34:47.826741847+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:34:47.895628108+02:00","level":"ERROR","msg":"Failed to edit list view message","env":"local","error":"Bad Request: message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message"}
{"time":"2025-09-06T21:39:03.989918767+02:00","level":"INFO","msg":"Shutdown signal received, stopping server","env":"local","component":"main"}
{"time":"2025-09-06T21:39:03.990022504+02:00","level":"INFO","msg":"Shutting down server","env":"local"}
{"time":"2025-09-06T21:39:03.990061652+02:00","level":"INFO","msg":"Bot context cancelled, stopping","env":"local"}
{"time":"2025-09-06T21:39:03.990114391+02:00","level":"INFO","msg":"Stopping Telegram service...","env":"local"}
{"time":"2025-09-06T21:39:25.132328623+02:00","level":"INFO","msg":"Starting shopping service","env":"local","component":"main","environment":"local","server_address":"0.0.0.0:3001","log_level":"info","db_host":"localhost","db_port":5432}
{"time":"2025-09-06T21:39:25.132491828+02:00","level":"INFO","msg":"Database connection established","env":"local","component":"database","db_host":"localhost","db_port":5432,"db_name":"pocket-pal","max_connections":100}
{"time":"2025-09-06T21:39:25.283828124+02:00","level":"INFO","msg":"Telegram admin users configured","env":"local","count":1}
{"time":"2025-09-06T21:39:25.283917937+02:00","level":"INFO","msg":"Telegram bot initialized","env":"local","bot_enabled":true,"admin_count":1,"debug_mode":true,"component":"telegram_service"}
{"time":"2025-09-06T21:39:25.283936371+02:00","level":"INFO","msg":"Starting server","env":"local","component":"server"}
{"time":"2025-09-06T21:39:25.28438999+02:00","level":"INFO","msg":"Server ready, waiting for shutdown signal","env":"local","component":"main"}
{"time":"2025-09-06T21:39:25.284519237+02:00","level":"INFO","msg":"Starting HTTP server","env":"local","address":"0.0.0.0:3001"}
{"time":"2025-09-06T21:39:25.284629721+02:00","level":"INFO","msg":"Telegram service started","env":"local","component":"telegram_service","bot_enabled":true}
{"time":"2025-09-06T21:39:25.284703422+02:00","level":"INFO","msg":"Starting Telegram bot","env":"local","bot_username":"shopping_service_bot"}
{"time":"2025-09-06T21:39:50.236024545+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:39:54.357808754+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_additem_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:39:54.687505509+02:00","level":"INFO","msg":"Storing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list","value":"5b905390-b306-49a3-a256-4976be3d9cac"}
{"time":"2025-09-06T21:39:56.549123916+02:00","level":"INFO","msg":"Received message","env":"local","component":"telegram_bot","user_id":508225490,"username":"washerd","message":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","chat_id":508225490,"message_type":"text","command":""}
{"time":"2025-09-06T21:39:56.549850948+02:00","level":"INFO","msg":"Starting AI parsing","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","user_id":"0fc9088b-3329-4adb-b764-1a88d79cecfc"}
{"time":"2025-09-06T21:39:56.549983148+02:00","level":"INFO","msg":"Built multi-item prompt for AI","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","prompt_length":8497,"prompt_preview":"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\n\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\n[\n  {\n    \"standardized_name\": \"standardized item name in the same language\",\n    \"category\": \"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\",\n    \"subcategory\": \"specific typ..."}
{"time":"2025-09-06T21:39:56.550073475+02:00","level":"INFO","msg":"[MULTI] Sending request to OpenAI Responses API","env":"local","url":"https://api.openai.com/v1/responses","model":"gpt-5-nano","api_key_prefix":"sk-proj-Zq...","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","request_body":"{\"model\":\"gpt-5-nano\",\"input\":[{\"role\":\"user\",\"content\":\"You are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and extract multiple items if present. Respond ONLY with valid JSON array.\\n\\nYou are an AI assistant that intelligently separates and standardizes shopping list items. Parse the input text and identify all individual items, even if they are written together.\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array in this exact format:\\n[\\n  {\\n    \\\"standardized_name\\\": \\\"standardized item name in the same language\\\",\\n    \\\"category\\\": \\\"main category (e.g., dairy, meat, vegetables, pantry, beverages, household)\\\",\\n    \\\"subcategory\\\": \\\"specific type (e.g., milk, chicken, carrots)\\\",\\n    \\\"quantity_value\\\": 2.5,\\n    \\\"quantity_unit\\\": \\\"unit (kg, L, pieces, etc.)\\\",\\n    \\\"confidence_score\\\": 0.95\\n  }\\n]\\n\\nRules:\\n- Intelligently separate items even without commas (e.g., \\\"milk bread eggs\\\" → 3 items)\\n- Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities\\n- CRITICAL: Always preserve the original language in standardized_name (молоко stays молоко, NOT milk)\\n- Categories and subcategories should be in English\\n- CRITICAL: Extract quantities correctly, including decimals with comma separators\\n- \\\"0,5 кг\\\" means 0.5 kilograms - DO NOT split this into \\\"0\\\" and \\\"5 кг\\\"\\n- \\\"1,5 л\\\" means 1.5 liters - keep as one item with quantity_value: 1.5\\n- Convert European decimal commas to dots: \\\"0,5\\\" → quantity_value: 0.5\\n- Separate complex sentences into individual items (e.g., \\\"мочалки для посуды. овощи- 3 огурца\\\" → 2 items)\\n- Handle variations like \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\" (fix typos but keep language)\\n- NEVER translate item names to other languages - keep them exactly as provided\\n- If no quantity is found, omit quantity_value and set quantity_unit to \\\"pieces\\\"\\n- confidence_score should be between 0.0 and 1.0\\n\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\n## Standard Categories and Subcategories:\\n\\n### dairy\\n- milk, yogurt, cheese, butter, cream, cottage_cheese, sour_cream\\n\\n### meat\\n- chicken, beef, pork, lamb, turkey, fish, seafood, sausage, ham\\n\\n### produce  \\n- fruits: apple, banana, orange, berries, grapes\\n- vegetables: carrot, onion, potato, tomato, lettuce, cucumber\\n\\n### pantry\\n- rice, pasta, flour, sugar, salt, oil, vinegar, spices, canned_goods\\n\\n### beverages\\n- water, juice, soda, coffee, tea, alcohol, milk_alternatives\\n\\n### bakery\\n- bread, rolls, bagels, pastry, cake, cookies\\n\\n### household\\n- cleaning_supplies, paper_products, personal_care, laundry\\n\\n### frozen\\n- frozen_vegetables, frozen_meals, ice_cream, frozen_meat\\n\\n### snacks\\n- chips, crackers, nuts, candy, chocolate\\n\\n## Quantity Units:\\nCommon units to recognize and standardize:\\n- Weight: kg, g, lb, oz\\n- Volume: L, ml, cup, pint, gallon\\n- Count: pieces, pack, box, bottle, can, bag\\n- Length: cm, inch (for items like aluminum foil)\\n\\n## English Language Examples:\\n\\n### Basic Items:\\n- \\\"milk\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"bread\\\" → {\\\"standardized_name\\\": \\\"bread\\\", \\\"category\\\": \\\"bakery\\\", \\\"subcategory\\\": \\\"bread\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.95}\\n\\n### With Quantities:\\n- \\\"milk 2L\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"L\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"chicken 1kg\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"kg\\\", \\\"confidence_score\\\": 0.95}\\n- \\\"apples (2 bags)\\\" → {\\\"standardized_name\\\": \\\"apples\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"fruits\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"bags\\\", \\\"confidence_score\\\": 0.95}\\n\\n### Common Typos/Variations:\\n- \\\"coffe\\\" → {\\\"standardized_name\\\": \\\"coffee\\\", \\\"category\\\": \\\"beverages\\\", \\\"subcategory\\\": \\\"coffee\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"tomatoe\\\" → {\\\"standardized_name\\\": \\\"tomato\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.9}\\n- \\\"chiken\\\" → {\\\"standardized_name\\\": \\\"chicken\\\", \\\"category\\\": \\\"meat\\\", \\\"subcategory\\\": \\\"chicken\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.85}\\n\\n### Ambiguous Cases:\\n- \\\"raw\\\" → {\\\"standardized_name\\\": \\\"milk\\\", \\\"category\\\": \\\"dairy\\\", \\\"subcategory\\\": \\\"milk\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.7}\\n- \\\"green\\\" → {\\\"standardized_name\\\": \\\"lettuce\\\", \\\"category\\\": \\\"produce\\\", \\\"subcategory\\\": \\\"vegetables\\\", \\\"quantity_unit\\\": \\\"pieces\\\", \\\"confidence_score\\\": 0.6}\\n\\n## Ambiguous Items and Context-Based Mappings:\\n\\n### High Ambiguity Cases (confidence \\u003c 0.8):\\nThese items require contextual inference and should have lower confidence scores:\\n\\n- \\\"raw\\\" → likely \\\"milk\\\" (dairy context)\\n- \\\"green\\\" → likely \\\"lettuce\\\" or \\\"herbs\\\" (produce context)  \\n- \\\"white\\\" → could be \\\"rice\\\", \\\"bread\\\", \\\"milk\\\" (context dependent)\\n- \\\"red\\\" → likely \\\"tomatoes\\\", \\\"apples\\\", or \\\"meat\\\" (context dependent)\\n- \\\"big\\\" → needs additional context\\n- \\\"small\\\" → needs additional context\\n- \\\"fresh\\\" → modifier, extract the actual item\\n\\n### Common Abbreviations:\\n- \\\"choc\\\" → \\\"chocolate\\\"\\n- \\\"veggies\\\" → \\\"vegetables\\\" \\n- \\\"fruits\\\" → \\\"mixed fruits\\\"\\n- \\\"meat\\\" → \\\"beef\\\" (default assumption)\\n- \\\"fish\\\" → \\\"fish\\\" (seafood category)\\n\\n### Context Clues:\\nWhen items are ambiguous, use these strategies:\\n1. Look for quantity units (2L suggests liquid like milk)\\n2. Consider common shopping patterns\\n3. Use lower confidence scores (0.6-0.8) for ambiguous items\\n4. Default to most common interpretation\\n\\n### Multi-word Items:\\n- \\\"olive oil\\\" → {\\\"standardized_name\\\": \\\"olive oil\\\", \\\"category\\\": \\\"pantry\\\", \\\"subcategory\\\": \\\"oil\\\"}\\n- \\\"ice cream\\\" → {\\\"standardized_name\\\": \\\"ice cream\\\", \\\"category\\\": \\\"frozen\\\", \\\"subcategory\\\": \\\"dessert\\\"}\\n- \\\"toilet paper\\\" → {\\\"standardized_name\\\": \\\"toilet paper\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"paper_products\\\"}\\n- \\\"washing powder\\\" → {\\\"standardized_name\\\": \\\"washing powder\\\", \\\"category\\\": \\\"household\\\", \\\"subcategory\\\": \\\"laundry\\\"}\\n\\n## Multi-Item Parsing Task:\\nInput: \\\"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\\"\\nLanguage: en\\n\\nIntelligently separate the input into individual items and respond ONLY with a JSON array. Consider:\\n1. Split items even without clear separators (e.g., \\\"milk bread eggs\\\" → 3 items)\\n2. Handle complex formats like \\\"2 apples and 3 oranges\\\" → 2 items with quantities  \\n3. Preserve original language in standardized_name\\n4. Categories and subcategories should be in English\\n5. Extract individual quantities correctly per item\\n6. Handle variations and typos (e.g., \\\"картошечка\\\" → \\\"картошка\\\", \\\"coffe\\\" → \\\"coffee\\\")\\n7. Use appropriate confidence scores based on ambiguity level\\n\\nCRITICAL DECIMAL PARSING EXAMPLES:\\n❌ WRONG: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]\\n✅ CORRECT: \\\"морковка 0,5 кг\\\" → [{\\\"standardized_name\\\": \\\"морковка\\\", \\\"quantity_value\\\": 0.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\n❌ WRONG: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\"}, {\\\"standardized_name\\\": \\\"5 кг\\\"}]  \\n✅ CORRECT: \\\"мука 1,5 кг\\\" → [{\\\"standardized_name\\\": \\\"мука\\\", \\\"quantity_value\\\": 1.5, \\\"quantity_unit\\\": \\\"kg\\\"}]\\n\\nOther correct examples:\\n- Input: \\\"молоко, сыр, багет\\\" → [{\\\"standardized_name\\\": \\\"молоко\\\"}, {\\\"standardized_name\\\": \\\"сыр\\\"}, {\\\"standardized_name\\\": \\\"багет\\\"}]\\n- Input: \\\"мочалки для посуды. овощи- 3 огурца\\\" → [{\\\"standardized_name\\\": \\\"мочалки для посуды\\\"}, {\\\"standardized_name\\\": \\\"огурцы\\\", \\\"quantity_value\\\": 3.0, \\\"quantity_unit\\\": \\\"pieces\\\"}]\\n- Input: \\\"хлеб 2 батона и молоко 1л\\\" → [{\\\"standardized_name\\\": \\\"хлеб\\\", \\\"quantity_value\\\": 2.0, \\\"quantity_unit\\\": \\\"pieces\\\"}, {\\\"standardized_name\\\": \\\"молоко\\\", \\\"quantity_value\\\": 1.0, \\\"quantity_unit\\\": \\\"L\\\"}]\\n\\nResponse format: JSON array of items, each with the structure specified above.\\nRemember to respond ONLY with the JSON array - no additional text or formatting.\\n\\nInput: Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки\\nLanguage: en\"}],\"store\":true,\"reasoning\":{\"effort\":\"low\"}}"}
{"time":"2025-09-06T21:40:09.741369945+02:00","level":"INFO","msg":"[MULTI] Received response from OpenAI Responses API","env":"local","status_code":200,"response_body":"{\n  \"id\": \"resp_68bc8e0d28888197bc575ede570b3d3d0d93d35aa1557a48\",\n  \"object\": \"response\",\n  \"created_at\": 1757187597,\n  \"status\": \"completed\",\n  \"background\": false,\n  \"error\": null,\n  \"incomplete_details\": null,\n  \"instructions\": null,\n  \"max_output_tokens\": null,\n  \"max_tool_calls\": null,\n  \"model\": \"gpt-5-nano-2025-08-07\",\n  \"output\": [\n    {\n      \"id\": \"rs_68bc8e0df9f081979a2c2b415f1d36c40d93d35aa1557a48\",\n      \"type\": \"reasoning\",\n      \"summary\": []\n    },\n    {\n      \"id\": \"msg_68bc8e14d4388197aac2df8fa78699a80d93d35aa1557a48\",\n      \"type\": \"message\",\n      \"status\": \"completed\",\n      \"content\": [\n        {\n          \"type\": \"output_text\",\n          \"annotations\": [],\n          \"logprobs\": [],\n          \"text\": \"[\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0429\\u0435\\u0442\\u043a\\u0430 \\u043d\\u0430 \\u0448\\u0432\\u0430\\u0431\\u0440\\u0443\\\",\\n    \\\"category\\\": \\\"household\\\",\\n    \\\"subcategory\\\": \\\"cleaning_supplies\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.9\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0442\\u0443\\u0430\\u043b\\u0435\\u0442\\u043d\\u0430\\u044f \\u0431\\u0443\\u043c\\u0430\\u0433\\u0430\\\",\\n    \\\"category\\\": \\\"household\\\",\\n    \\\"subcategory\\\": \\\"paper_products\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043c\\u043e\\u0447\\u0430\\u043b\\u043a\\u0438 \\u0434\\u043b\\u044f \\u043f\\u043e\\u0441\\u0443\\u0434\\u044b\\\",\\n    \\\"category\\\": \\\"household\\\",\\n    \\\"subcategory\\\": \\\"cleaning_supplies\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.9\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043e\\u0433\\u0443\\u0440\\u0446\\u044b\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"vegetables\\\",\\n    \\\"quantity_value\\\": 3.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043a\\u0443\\u043a\\u0443\\u0440\\u0443\\u0437\\u0430\\\",\\n    \\\"category\\\": \\\"pantry\\\",\\n    \\\"subcategory\\\": \\\"canned_goods\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pack\\\",\\n    \\\"confidence_score\\\": 0.9\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043b\\u0438\\u0441\\u0442 \\u0441\\u0430\\u043b\\u0430\\u0442\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"vegetables\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.9\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043c\\u043e\\u0440\\u043a\\u043e\\u0432\\u043a\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"vegetables\\\",\\n    \\\"quantity_value\\\": 0.5,\\n    \\\"quantity_unit\\\": \\\"kg\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0433\\u043e\\u043b\\u0443\\u0431\\u0438\\u043a\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"fruits\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pack\\\",\\n    \\\"confidence_score\\\": 0.9\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043a\\u0430\\u043f\\u0443\\u0441\\u0442\\u0430\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"vegetables\\\",\\n    \\\"quantity_value\\\": 0.5,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.9\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0441\\u0430\\u043b\\u0430\\u0442 \\u0446\\u0435\\u0437\\u0430\\u0440\\u044c\\\",\\n    \\\"category\\\": \\\"produce\\\",\\n    \\\"subcategory\\\": \\\"vegetables\\\",\\n    \\\"quantity_value\\\": 0.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.6\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0441\\u0430\\u043b\\u0430\\u0442 \\u0441 \\u0442\\u0443\\u043d\\u0446\\u043e\\u043c\\\",\\n    \\\"category\\\": \\\"pantry\\\",\\n    \\\"subcategory\\\": \\\"canned_goods\\\",\\n    \\\"quantity_value\\\": 0.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.6\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0445\\u043b\\u0435\\u0431 \\u0446\\u0435\\u043b\\u044c\\u043d\\u043e\\u0437\\u0435\\u0440\\u043d\\u043e\\u0432\\u043e\\u0439\\\",\\n    \\\"category\\\": \\\"bakery\\\",\\n    \\\"subcategory\\\": \\\"bread\\\",\\n    \\\"quantity_value\\\": 0.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0440\\u044b\\u0431\\u0430 \\u043a\\u0440\\u0430\\u0441\\u043d\\u0430\\u044f \\u0444\\u0438\\u043b\\u0435\\\",\\n    \\\"category\\\": \\\"beverages\\\",\\n    \\\"subcategory\\\": \\\"fish\\\",\\n    \\\"quantity_value\\\": 0.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.6\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u043a\\u0440\\u043e\\u043b\\u0438\\u043a\\\",\\n    \\\"category\\\": \\\"meat\\\",\\n    \\\"subcategory\\\": \\\"rabbit\\\",\\n    \\\"quantity_value\\\": 0.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.7\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0444\\u0438\\u043b\\u0435 \\u043a\\u0443\\u0440\\u0438\\u0446\\u044b\\\",\\n    \\\"category\\\": \\\"meat\\\",\\n    \\\"subcategory\\\": \\\"chicken\\\",\\n    \\\"quantity_value\\\": 1.0,\\n    \\\"quantity_unit\\\": \\\"pack\\\",\\n    \\\"confidence_score\\\": 0.95\\n  },\\n  {\\n    \\\"standardized_name\\\": \\\"\\u0441\\u043b\\u0438\\u0432\\u043a\\u0438\\\",\\n    \\\"category\\\": \\\"dairy\\\",\\n    \\\"subcategory\\\": \\\"cream\\\",\\n    \\\"quantity_value\\\": 0.0,\\n    \\\"quantity_unit\\\": \\\"pieces\\\",\\n    \\\"confidence_score\\\": 0.9\\n  }\\n]\"\n        }\n      ],\n      \"role\": \"assistant\"\n    }\n  ],\n  \"parallel_tool_calls\": true,\n  \"previous_response_id\": null,\n  \"prompt_cache_key\": null,\n  \"reasoning\": {\n    \"effort\": \"low\",\n    \"summary\": null\n  },\n  \"safety_identifier\": null,\n  \"service_tier\": \"default\",\n  \"store\": true,\n  \"temperature\": 1.0,\n  \"text\": {\n    \"format\": {\n      \"type\": \"text\"\n    },\n    \"verbosity\": \"medium\"\n  },\n  \"tool_choice\": \"auto\",\n  \"tools\": [],\n  \"top_logprobs\": 0,\n  \"top_p\": 1.0,\n  \"truncation\": \"disabled\",\n  \"usage\": {\n    \"input_tokens\": 2428,\n    \"input_tokens_details\": {\n      \"cached_tokens\": 0\n    },\n    \"output_tokens\": 2445,\n    \"output_tokens_details\": {\n      \"reasoning_tokens\": 1472\n    },\n    \"total_tokens\": 4873\n  },\n  \"user\": null,\n  \"metadata\": {}\n}"}
{"time":"2025-09-06T21:40:09.741528386+02:00","level":"INFO","msg":"Successfully parsed multiple items with Responses API","env":"local","raw_text":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","model":"gpt-5-nano","items_count":16,"tokens_used":4873,"reasoning_effort":"low"}
{"time":"2025-09-06T21:40:09.741538727+02:00","level":"INFO","msg":"AI parsing completed","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","results_count":16}
{"time":"2025-09-06T21:40:09.741543748+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":1,"standardized_name":"Щетка на швабру","category":"household","subcategory":"cleaning_supplies","quantity_value":1,"quantity_unit":"pieces","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.741554005+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":2,"standardized_name":"туалетная бумага","category":"household","subcategory":"paper_products","quantity_value":1,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:40:09.741557542+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":3,"standardized_name":"мочалки для посуды","category":"household","subcategory":"cleaning_supplies","quantity_value":1,"quantity_unit":"pieces","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.741560507+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":4,"standardized_name":"огурцы","category":"produce","subcategory":"vegetables","quantity_value":3,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:40:09.74156614+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":5,"standardized_name":"кукуруза","category":"pantry","subcategory":"canned_goods","quantity_value":1,"quantity_unit":"pack","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.741569008+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":6,"standardized_name":"лист салата","category":"produce","subcategory":"vegetables","quantity_value":1,"quantity_unit":"pieces","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.741571793+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":7,"standardized_name":"морковка","category":"produce","subcategory":"vegetables","quantity_value":0.5,"quantity_unit":"kg","confidence_score":0.95}
{"time":"2025-09-06T21:40:09.741575052+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":8,"standardized_name":"голубика","category":"produce","subcategory":"fruits","quantity_value":1,"quantity_unit":"pack","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.741577964+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":9,"standardized_name":"капуста","category":"produce","subcategory":"vegetables","quantity_value":0.5,"quantity_unit":"pieces","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.741580749+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":10,"standardized_name":"салат цезарь","category":"produce","subcategory":"vegetables","quantity_value":0,"quantity_unit":"pieces","confidence_score":0.6}
{"time":"2025-09-06T21:40:09.741585158+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":11,"standardized_name":"салат с тунцом","category":"pantry","subcategory":"canned_goods","quantity_value":0,"quantity_unit":"pieces","confidence_score":0.6}
{"time":"2025-09-06T21:40:09.741588018+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":12,"standardized_name":"хлеб цельнозерновой","category":"bakery","subcategory":"bread","quantity_value":0,"quantity_unit":"pieces","confidence_score":0.95}
{"time":"2025-09-06T21:40:09.741590805+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":13,"standardized_name":"рыба красная филе","category":"beverages","subcategory":"fish","quantity_value":0,"quantity_unit":"pieces","confidence_score":0.6}
{"time":"2025-09-06T21:40:09.741593816+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":14,"standardized_name":"кролик","category":"meat","subcategory":"rabbit","quantity_value":0,"quantity_unit":"pieces","confidence_score":0.7}
{"time":"2025-09-06T21:40:09.741599106+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":15,"standardized_name":"филе курицы","category":"meat","subcategory":"chicken","quantity_value":1,"quantity_unit":"pack","confidence_score":0.95}
{"time":"2025-09-06T21:40:09.741601863+02:00","level":"INFO","msg":"AI parsed item","env":"local","index":16,"standardized_name":"сливки","category":"dairy","subcategory":"cream","quantity_value":0,"quantity_unit":"pieces","confidence_score":0.9}
{"time":"2025-09-06T21:40:09.748224771+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"Щетка на швабру","parsed":"Щетка на швабру","category":"household","confidence":0.9,"item_index":1,"total_items":16}
{"time":"2025-09-06T21:40:09.750065227+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"туалетная бумага","parsed":"туалетная бумага","category":"household","confidence":0.95,"item_index":2,"total_items":16}
{"time":"2025-09-06T21:40:09.752164485+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"мочалки для посуды","parsed":"мочалки для посуды","category":"household","confidence":0.9,"item_index":3,"total_items":16}
{"time":"2025-09-06T21:40:09.754011984+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"огурцы","parsed":"огурцы","category":"produce","confidence":0.95,"item_index":4,"total_items":16}
{"time":"2025-09-06T21:40:09.755567943+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кукуруза","parsed":"кукуруза","category":"pantry","confidence":0.9,"item_index":5,"total_items":16}
{"time":"2025-09-06T21:40:09.757058491+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"лист салата","parsed":"лист салата","category":"produce","confidence":0.9,"item_index":6,"total_items":16}
{"time":"2025-09-06T21:40:09.758680847+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"морковка","parsed":"морковка","category":"produce","confidence":0.95,"item_index":7,"total_items":16}
{"time":"2025-09-06T21:40:09.760304816+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"голубика","parsed":"голубика","category":"produce","confidence":0.9,"item_index":8,"total_items":16}
{"time":"2025-09-06T21:40:09.761798121+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"капуста","parsed":"капуста","category":"produce","confidence":0.9,"item_index":9,"total_items":16}
{"time":"2025-09-06T21:40:09.763270375+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"салат цезарь","parsed":"салат цезарь","category":"produce","confidence":0.6,"item_index":10,"total_items":16}
{"time":"2025-09-06T21:40:09.764917847+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"салат с тунцом","parsed":"салат с тунцом","category":"pantry","confidence":0.6,"item_index":11,"total_items":16}
{"time":"2025-09-06T21:40:09.766519988+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"хлеб цельнозерновой","parsed":"хлеб цельнозерновой","category":"bakery","confidence":0.95,"item_index":12,"total_items":16}
{"time":"2025-09-06T21:40:09.767969885+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"рыба красная филе","parsed":"рыба красная филе","category":"beverages","confidence":0.6,"item_index":13,"total_items":16}
{"time":"2025-09-06T21:40:09.76946547+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"кролик","parsed":"кролик","category":"meat","confidence":0.7,"item_index":14,"total_items":16}
{"time":"2025-09-06T21:40:09.771209321+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"филе курицы","parsed":"филе курицы","category":"meat","confidence":0.95,"item_index":15,"total_items":16}
{"time":"2025-09-06T21:40:09.772923424+02:00","level":"INFO","msg":"Successfully stored training data for item","env":"local","original":"сливки","parsed":"сливки","category":"dairy","confidence":0.9,"item_index":16,"total_items":16}
{"time":"2025-09-06T21:40:09.77293389+02:00","level":"INFO","msg":"Successfully parsed and stored items with AI","env":"local","raw_input":"Щетка на швабру, туалетная бумага, мочалки для посуды. Овощи- 3 огурца, 1 пачка кукурузы, лист салата,морковка 0,5 кг, голубика 1 уп, пол капусты, где овощи - салат цезарь, салат с тунцом .хлеб цельнозерновой, рыба красная филе,кролик, филе курицы 1 маленькая уп,сливки","language":"en","total_parsed":16,"successfully_stored":16}
{"time":"2025-09-06T21:40:09.773842153+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"Щетка на швабру","parsed":"Щетка на швабру","category":"household","confidence":0.9}
{"time":"2025-09-06T21:40:09.774440928+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"туалетная бумага","parsed":"туалетная бумага","category":"household","confidence":0.95}
{"time":"2025-09-06T21:40:09.774981662+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"мочалки для посуды","parsed":"мочалки для посуды","category":"household","confidence":0.9}
{"time":"2025-09-06T21:40:09.775569548+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"огурцы","parsed":"огурцы","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:40:09.776195178+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кукуруза","parsed":"кукуруза","category":"pantry","confidence":0.9}
{"time":"2025-09-06T21:40:09.776876246+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"лист салата","parsed":"лист салата","category":"produce","confidence":0.9}
{"time":"2025-09-06T21:40:09.777539595+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"морковка","parsed":"морковка","category":"produce","confidence":0.95}
{"time":"2025-09-06T21:40:09.778189139+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"голубика","parsed":"голубика","category":"produce","confidence":0.9}
{"time":"2025-09-06T21:40:09.778799142+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"капуста","parsed":"капуста","category":"produce","confidence":0.9}
{"time":"2025-09-06T21:40:09.779420655+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"салат цезарь","parsed":"салат цезарь","category":"produce","confidence":0.6}
{"time":"2025-09-06T21:40:09.78007758+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"салат с тунцом","parsed":"салат с тунцом","category":"pantry","confidence":0.6}
{"time":"2025-09-06T21:40:09.780602045+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"хлеб цельнозерновой","parsed":"хлеб цельнозерновой","category":"bakery","confidence":0.95}
{"time":"2025-09-06T21:40:09.781116787+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"рыба красная филе","parsed":"рыба красная филе","category":"beverages","confidence":0.6}
{"time":"2025-09-06T21:40:09.781627967+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"кролик","parsed":"кролик","category":"meat","confidence":0.7}
{"time":"2025-09-06T21:40:09.782136249+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"филе курицы","parsed":"филе курицы","category":"meat","confidence":0.95}
{"time":"2025-09-06T21:40:09.782678684+02:00","level":"INFO","msg":"Successfully added AI-parsed item","env":"local","component":"shopping-service","original":"сливки","parsed":"сливки","category":"dairy","confidence":0.9}
{"time":"2025-09-06T21:40:09.782692261+02:00","level":"INFO","msg":"Clearing user state","env":"local","telegram_id":508225490,"state":"adding_item_to_list"}
{"time":"2025-09-06T21:40:09.866044451+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кролик","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:09.890691027+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"капуста","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:09.921200904+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:09.946609523+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"голубика","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:09.967305474+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"огурцы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:09.99421666+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"мочалки для посуды","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.033678178+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"сливки","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.061639587+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"салат с тунцом","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.085540036+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"филе курицы","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.106178636+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"Щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.12456301+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"кукуруза","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.144704154+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"морковка","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.1738345+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"салат цезарь","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.201442715+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"рыба красная филе","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.235181238+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"хлеб цельнозерновой","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:10.251749942+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_added_notification","item_name":"лист салата","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:35.495920736+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"list_view_5b905390-b306-49a3-a256-4976be3d9cac","chat_id":508225490}
{"time":"2025-09-06T21:40:52.485747057+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_08e9eccc","chat_id":508225490}
{"time":"2025-09-06T21:40:52.61360972+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"Щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:40:56.721654266+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_08e9eccc","chat_id":508225490}
{"time":"2025-09-06T21:40:56.855807682+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_uncompleted_notification","item_name":"Щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:41:00.392743036+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_08e9eccc","chat_id":508225490}
{"time":"2025-09-06T21:41:00.508790787+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"Щетка на швабру","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:41:01.519819029+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_93c6d5b7","chat_id":508225490}
{"time":"2025-09-06T21:41:01.783101274+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"туалетная бумага","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:41:02.52723842+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_b21d64a8","chat_id":508225490}
{"time":"2025-09-06T21:41:02.743677542+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"мочалки для посуды","list_name":"на субботу","actor":"@washerd"}
{"time":"2025-09-06T21:41:03.193594695+02:00","level":"INFO","msg":"Received callback query","env":"local","component":"telegram_bot","user_id":508225490,"data":"li_t_5b905390_33911619","chat_id":508225490}
{"time":"2025-09-06T21:41:03.578571408+02:00","level":"INFO","msg":"Sent item edit notification","env":"local","member_telegram_id":456230761,"template_name":"item_completed_notification","item_name":"огурцы","list_name":"на субботу","actor":"@washerd"}
